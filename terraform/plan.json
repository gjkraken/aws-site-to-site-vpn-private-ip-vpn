{"format_version":"1.2","terraform_version":"1.11.2","variables":{"asn_numbers":{"value":{"amazon_side_dxgw":"64531","amazon_side_tgw":"64532","customer_side":64533}},"aws_region":{"value":"eu-central-1"},"customer_gateway_ip":{"value":"10.66.3.2"},"dxgw_allowed_prefixes":{"value":["10.66.0.0/16"]},"dxgw_id":{"value":""},"identifier":{"value":"tgw-dx-private-ip-vpn"},"tgw_cidr_blocks":{"value":["10.66.2.0/24"]}},"planned_values":{"outputs":{"customer_gateway_id":{"sensitive":false},"dx_gateway_id":{"sensitive":false},"ec2_instances":{"sensitive":false},"private_ip_vpn_id":{"sensitive":false},"ssm_endpoints":{"sensitive":false},"transit_gateway_id":{"sensitive":false},"vpcs":{"sensitive":false}},"root_module":{"resources":[{"address":"aws_customer_gateway.cgw","mode":"managed","type":"aws_customer_gateway","name":"cgw","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bgp_asn":"64533","certificate_arn":null,"device_name":null,"ip_address":"10.66.3.2","tags":{"Name":"customer_gateway-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"customer_gateway-tgw-dx-private-ip-vpn"},"type":"ipsec.1"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_dx_gateway.dxgw[0]","mode":"managed","type":"aws_dx_gateway","name":"dxgw","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"amazon_side_asn":"64531","name":"dxgw-tgw-dx-private-ip-vpn","timeouts":null},"sensitive_values":{}},{"address":"aws_dx_gateway_association.dxgw_tgw_association","mode":"managed","type":"aws_dx_gateway_association","name":"dxgw_tgw_association","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"allowed_prefixes":["10.66.0.0/16"],"proposal_id":null,"timeouts":null,"vpn_gateway_id":null},"sensitive_values":{"allowed_prefixes":[false]}},{"address":"aws_ec2_transit_gateway.tgw","mode":"managed","type":"aws_ec2_transit_gateway","name":"tgw","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"amazon_side_asn":64532,"auto_accept_shared_attachments":"disable","default_route_table_association":"disable","default_route_table_propagation":"disable","description":"transit_gateway-tgw-dx-private-ip-vpn","dns_support":"enable","multicast_support":"disable","tags":{"Name":"transit_gateway-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"transit_gateway-tgw-dx-private-ip-vpn"},"timeouts":null,"transit_gateway_cidr_blocks":["10.66.2.0/24"],"vpn_ecmp_support":"enable"},"sensitive_values":{"tags":{},"tags_all":{},"transit_gateway_cidr_blocks":[false]}},{"address":"aws_ec2_transit_gateway_route_table.tgw_rt","mode":"managed","type":"aws_ec2_transit_gateway_route_table","name":"tgw_rt","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"tags":{"Name":"tgw-rt-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"tgw-rt-tgw-dx-private-ip-vpn"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"aws_ec2_transit_gateway_route_table_association.spoke_tgw_association[\"spoke-vpc-a\"]","mode":"managed","type":"aws_ec2_transit_gateway_route_table_association","name":"spoke_tgw_association","index":"spoke-vpc-a","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}},{"address":"aws_ec2_transit_gateway_route_table_association.spoke_tgw_association[\"spoke-vpc-b\"]","mode":"managed","type":"aws_ec2_transit_gateway_route_table_association","name":"spoke_tgw_association","index":"spoke-vpc-b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}},{"address":"aws_ec2_transit_gateway_route_table_association.vpn_tgw_association","mode":"managed","type":"aws_ec2_transit_gateway_route_table_association","name":"vpn_tgw_association","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}},{"address":"aws_ec2_transit_gateway_route_table_propagation.spoke_tgw_propagation[\"spoke-vpc-a\"]","mode":"managed","type":"aws_ec2_transit_gateway_route_table_propagation","name":"spoke_tgw_propagation","index":"spoke-vpc-a","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}},{"address":"aws_ec2_transit_gateway_route_table_propagation.spoke_tgw_propagation[\"spoke-vpc-b\"]","mode":"managed","type":"aws_ec2_transit_gateway_route_table_propagation","name":"spoke_tgw_propagation","index":"spoke-vpc-b","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}},{"address":"aws_ec2_transit_gateway_route_table_propagation.vpn_tgw_propagation","mode":"managed","type":"aws_ec2_transit_gateway_route_table_propagation","name":"vpn_tgw_propagation","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}},{"address":"aws_vpn_connection.private_ip_vpn","mode":"managed","type":"aws_vpn_connection","name":"private_ip_vpn","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"outside_ip_address_type":"PrivateIpv4","tags":{"Name":"vpn-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"vpn-tgw-dx-private-ip-vpn"},"tunnel1_dpd_timeout_action":null,"tunnel1_dpd_timeout_seconds":null,"tunnel1_ike_versions":null,"tunnel1_phase1_dh_group_numbers":null,"tunnel1_phase1_encryption_algorithms":null,"tunnel1_phase1_integrity_algorithms":null,"tunnel1_phase1_lifetime_seconds":null,"tunnel1_phase2_dh_group_numbers":null,"tunnel1_phase2_encryption_algorithms":null,"tunnel1_phase2_integrity_algorithms":null,"tunnel1_phase2_lifetime_seconds":null,"tunnel1_rekey_fuzz_percentage":null,"tunnel1_rekey_margin_time_seconds":null,"tunnel1_replay_window_size":null,"tunnel1_startup_action":null,"tunnel2_dpd_timeout_action":null,"tunnel2_dpd_timeout_seconds":null,"tunnel2_ike_versions":null,"tunnel2_phase1_dh_group_numbers":null,"tunnel2_phase1_encryption_algorithms":null,"tunnel2_phase1_integrity_algorithms":null,"tunnel2_phase1_lifetime_seconds":null,"tunnel2_phase2_dh_group_numbers":null,"tunnel2_phase2_encryption_algorithms":null,"tunnel2_phase2_integrity_algorithms":null,"tunnel2_phase2_lifetime_seconds":null,"tunnel2_rekey_fuzz_percentage":null,"tunnel2_rekey_margin_time_seconds":null,"tunnel2_replay_window_size":null,"tunnel2_startup_action":null,"type":"ipsec.1","vpn_gateway_id":null},"sensitive_values":{"customer_gateway_configuration":true,"routes":[],"tags":{},"tags_all":{},"tunnel1_preshared_key":true,"tunnel2_preshared_key":true,"vgw_telemetry":[]}},{"address":"data.aws_ec2_transit_gateway_dx_gateway_attachment.tgw_dxgw_attachment","mode":"data","type":"aws_ec2_transit_gateway_dx_gateway_attachment","name":"tgw_dxgw_attachment","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"filter":[]},"sensitive_values":{"filter":[],"tags":{}}},{"address":"data.aws_ec2_transit_gateway_vpn_attachment.vpn_tgw_attachment","mode":"data","type":"aws_ec2_transit_gateway_vpn_attachment","name":"vpn_tgw_attachment","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"filter":[]},"sensitive_values":{"filter":[],"tags":{}}}],"child_modules":[{"resources":[{"address":"module.compute[\"spoke-vpc-a\"].aws_instance.ec2_instance[0]","mode":"managed","type":"aws_instance","name":"ec2_instance","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-086ecbd485d8bb032","associate_public_ip_address":false,"credit_specification":[],"get_password_data":false,"hibernation":null,"instance_type":"t2.micro","launch_template":[],"metadata_options":[{"http_endpoint":"enabled","http_tokens":"required","instance_metadata_tags":"disabled"}],"root_block_device":[{"delete_on_termination":true,"encrypted":true,"tags":null}],"source_dest_check":true,"tags":{"Name":"spoke-vpc-a-instance-1-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"spoke-vpc-a-instance-1-tgw-dx-private-ip-vpn"},"timeouts":null,"user_data_replace_on_change":false,"volume_tags":null},"sensitive_values":{"capacity_reservation_specification":[],"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[],"root_block_device":[{}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}},{"address":"module.compute[\"spoke-vpc-a\"].aws_security_group.spoke_vpc_sg","mode":"managed","type":"aws_security_group","name":"spoke_vpc_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security Group used in the EC2 instances","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Any traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allowing HTTP traffic","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80},{"cidr_blocks":["0.0.0.0/0"],"description":"Allowing ICMP traffic","from_port":-1,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"icmp","security_groups":[],"self":false,"to_port":-1}],"name":"instance_sg","revoke_rules_on_delete":false,"tags":{"Name":"spoke-vpc-a-instance-security-group-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"spoke-vpc-a-instance-security-group-tgw-dx-private-ip-vpn"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}],"address":"module.compute[\"spoke-vpc-a\"]"},{"resources":[{"address":"module.compute[\"spoke-vpc-b\"].aws_instance.ec2_instance[0]","mode":"managed","type":"aws_instance","name":"ec2_instance","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"ami":"ami-086ecbd485d8bb032","associate_public_ip_address":false,"credit_specification":[],"get_password_data":false,"hibernation":null,"instance_type":"t2.micro","launch_template":[],"metadata_options":[{"http_endpoint":"enabled","http_tokens":"required","instance_metadata_tags":"disabled"}],"root_block_device":[{"delete_on_termination":true,"encrypted":true,"tags":null}],"source_dest_check":true,"tags":{"Name":"spoke-vpc-b-instance-1-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"spoke-vpc-b-instance-1-tgw-dx-private-ip-vpn"},"timeouts":null,"user_data_replace_on_change":false,"volume_tags":null},"sensitive_values":{"capacity_reservation_specification":[],"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[],"root_block_device":[{}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}},{"address":"module.compute[\"spoke-vpc-b\"].aws_security_group.spoke_vpc_sg","mode":"managed","type":"aws_security_group","name":"spoke_vpc_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security Group used in the EC2 instances","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Any traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allowing HTTP traffic","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80},{"cidr_blocks":["0.0.0.0/0"],"description":"Allowing ICMP traffic","from_port":-1,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"icmp","security_groups":[],"self":false,"to_port":-1}],"name":"instance_sg","revoke_rules_on_delete":false,"tags":{"Name":"spoke-vpc-b-instance-security-group-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"spoke-vpc-b-instance-security-group-tgw-dx-private-ip-vpn"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}],"address":"module.compute[\"spoke-vpc-b\"]"},{"resources":[{"address":"module.iam_kms.aws_iam_instance_profile.ec2_instance_profile","mode":"managed","type":"aws_iam_instance_profile","name":"ec2_instance_profile","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"ec2_instance_profile_tgw-dx-private-ip-vpn","name_prefix":null,"path":"/","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"module.iam_kms.aws_iam_policy_attachment.s3_readonly_policy_attachment","mode":"managed","type":"aws_iam_policy_attachment","name":"s3_readonly_policy_attachment","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"groups":null,"name":"s3_readonly_policy_attachment_tgw-dx-private-ip-vpn","policy_arn":"arn:aws:iam::aws:policy/AmazonS3ReadOnlyAccess","users":null},"sensitive_values":{"roles":[]}},{"address":"module.iam_kms.aws_iam_policy_attachment.ssm_iam_role_policy_attachment","mode":"managed","type":"aws_iam_policy_attachment","name":"ssm_iam_role_policy_attachment","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"groups":null,"name":"ssm_iam_role_policy_attachment_tgw-dx-private-ip-vpn","policy_arn":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore","users":null},"sensitive_values":{"roles":[]}},{"address":"module.iam_kms.aws_iam_policy_attachment.ssm_iam_service_role_attachment","mode":"managed","type":"aws_iam_policy_attachment","name":"ssm_iam_service_role_attachment","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"groups":null,"name":"ssm_iam_service_role_attachment_tgw-dx-private-ip-vpn","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonEC2RoleforSSM","users":null},"sensitive_values":{"roles":[]}},{"address":"module.iam_kms.aws_iam_role.role_ec2","mode":"managed","type":"aws_iam_role","name":"role_ec2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"1\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      }\n    }\n  ]\n}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ec2_ssm_role_tgw-dx-private-ip-vpn","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"module.iam_kms.aws_iam_role.vpc_flowlogs_role","mode":"managed","type":"aws_iam_role","name":"vpc_flowlogs_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"1\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"vpc-flow-logs.amazonaws.com\"\n      }\n    }\n  ]\n}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"vpc-flowlog-role-tgw-dx-private-ip-vpn","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"module.iam_kms.aws_iam_role_policy.vpc_flowlogs_role_policy","mode":"managed","type":"aws_iam_role_policy","name":"vpc_flowlogs_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"vpc-flowlog-role-policy-tgw-dx-private-ip-vpn","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"2\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:DescribeLogStreams\",\n        \"logs:DescribeLogGroup\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"arn:aws:logs:eu-central-1:219608582189:*\"\n    }\n  ]\n}"},"sensitive_values":{}},{"address":"module.iam_kms.aws_kms_key.log_key","mode":"managed","type":"aws_kms_key","name":"log_key","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bypass_policy_lockout_safety_check":false,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":7,"description":"KMS Logs Key","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Enable IAM User Permissions\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:*\",\n      \"Resource\": \"arn:aws:kms:eu-central-1:219608582189:*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::219608582189:root\"\n      }\n    },\n    {\n      \"Sid\": \"Enable KMS to be used by CloudWatch Logs\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ReEncrypt*\",\n        \"kms:GenerateDataKey*\",\n        \"kms:Encrypt*\",\n        \"kms:Describe*\",\n        \"kms:Decrypt*\"\n      ],\n      \"Resource\": \"arn:aws:kms:eu-central-1:219608582189:*\",\n      \"Principal\": {\n        \"Service\": \"logs.eu-central-1.amazonaws.com\"\n      },\n      \"Condition\": {\n        \"ArnLike\": {\n          \"kms:EncryptionContext:aws:logs:arn\": \"arn:aws:logs:eu-central-1:219608582189:*\"\n        }\n      }\n    }\n  ]\n}","tags":{"Name":"kms-key-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"kms-key-tgw-dx-private-ip-vpn"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.iam_kms"},{"resources":[{"address":"module.vpc_endpoints[\"spoke-vpc-a\"].aws_security_group.endpoints_vpc_sg","mode":"managed","type":"aws_security_group","name":"endpoints_vpc_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security Group for SSM connection","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Any traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allowing HTTPS","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"endpoints_sg","revoke_rules_on_delete":false,"tags":{"Name":"spoke-vpc-a-endpoints-security-group-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"spoke-vpc-a-endpoints-security-group-tgw-dx-private-ip-vpn"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.vpc_endpoints[\"spoke-vpc-a\"].aws_vpc_endpoint.endpoint[\"ec2messages\"]","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint","index":"ec2messages","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"service_name":"com.amazonaws.eu-central-1.ec2messages","tags":null,"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_ids":[],"tags_all":{}}},{"address":"module.vpc_endpoints[\"spoke-vpc-a\"].aws_vpc_endpoint.endpoint[\"ssm\"]","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint","index":"ssm","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"service_name":"com.amazonaws.eu-central-1.ssm","tags":null,"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_ids":[],"tags_all":{}}},{"address":"module.vpc_endpoints[\"spoke-vpc-a\"].aws_vpc_endpoint.endpoint[\"ssmmessages\"]","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint","index":"ssmmessages","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"service_name":"com.amazonaws.eu-central-1.ssmmessages","tags":null,"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_ids":[],"tags_all":{}}}],"address":"module.vpc_endpoints[\"spoke-vpc-a\"]"},{"resources":[{"address":"module.vpc_endpoints[\"spoke-vpc-b\"].aws_security_group.endpoints_vpc_sg","mode":"managed","type":"aws_security_group","name":"endpoints_vpc_sg","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security Group for SSM connection","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Any traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allowing HTTPS","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"endpoints_sg","revoke_rules_on_delete":false,"tags":{"Name":"spoke-vpc-b-endpoints-security-group-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"spoke-vpc-b-endpoints-security-group-tgw-dx-private-ip-vpn"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.vpc_endpoints[\"spoke-vpc-b\"].aws_vpc_endpoint.endpoint[\"ec2messages\"]","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint","index":"ec2messages","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"service_name":"com.amazonaws.eu-central-1.ec2messages","tags":null,"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_ids":[],"tags_all":{}}},{"address":"module.vpc_endpoints[\"spoke-vpc-b\"].aws_vpc_endpoint.endpoint[\"ssm\"]","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint","index":"ssm","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"service_name":"com.amazonaws.eu-central-1.ssm","tags":null,"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_ids":[],"tags_all":{}}},{"address":"module.vpc_endpoints[\"spoke-vpc-b\"].aws_vpc_endpoint.endpoint[\"ssmmessages\"]","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint","index":"ssmmessages","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"auto_accept":null,"private_dns_enabled":true,"service_name":"com.amazonaws.eu-central-1.ssmmessages","tags":null,"timeouts":null,"vpc_endpoint_type":"Interface"},"sensitive_values":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_ids":[],"tags_all":{}}}],"address":"module.vpc_endpoints[\"spoke-vpc-b\"]"},{"resources":[{"address":"module.vpcs[\"spoke-vpc-a\"].aws_ec2_transit_gateway_vpc_attachment.tgw[0]","mode":"managed","type":"aws_ec2_transit_gateway_vpc_attachment","name":"tgw","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"appliance_mode_support":"disable","dns_support":"enable","ipv6_support":"disable","tags":null,"transit_gateway_default_route_table_association":false,"transit_gateway_default_route_table_propagation":false},"sensitive_values":{"subnet_ids":[],"tags_all":{}}},{"address":"module.vpcs[\"spoke-vpc-a\"].aws_route.private_to_tgw[\"eu-central-1a:0.0.0.0/0\"]","mode":"managed","type":"aws_route","name":"private_to_tgw","index":"eu-central-1a:0.0.0.0/0","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"nat_gateway_id":null,"timeouts":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"sensitive_values":{}},{"address":"module.vpcs[\"spoke-vpc-a\"].aws_subnet.private[\"eu-central-1a\"]","mode":"managed","type":"aws_subnet","name":"private","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-central-1a","cidr_block":"10.66.4.0/26","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"private-eu-central-1a"},"tags_all":{"Name":"private-eu-central-1a"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpcs[\"spoke-vpc-a\"].aws_subnet.tgw[\"eu-central-1a\"]","mode":"managed","type":"aws_subnet","name":"tgw","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-central-1a","cidr_block":"10.66.4.192/28","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"tgw-eu-central-1a"},"tags_all":{"Name":"tgw-eu-central-1a"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpcs[\"spoke-vpc-a\"].aws_vpc.main[0]","mode":"managed","type":"aws_vpc","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.66.4.0/24","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Name":"spoke-vpc-a"},"tags_all":{"Name":"spoke-vpc-a"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpcs[\"spoke-vpc-a\"].awscc_ec2_route_table.private[\"eu-central-1a\"]","mode":"managed","type":"awscc_ec2_route_table","name":"private","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/awscc","schema_version":1,"values":{"tags":[{"key":"Name","value":"private-eu-central-1a"}]},"sensitive_values":{"tags":[{}]}},{"address":"module.vpcs[\"spoke-vpc-a\"].awscc_ec2_route_table.tgw[\"eu-central-1a\"]","mode":"managed","type":"awscc_ec2_route_table","name":"tgw","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/awscc","schema_version":1,"values":{"tags":[{"key":"Name","value":"tgw-eu-central-1a"}]},"sensitive_values":{"tags":[{}]}},{"address":"module.vpcs[\"spoke-vpc-a\"].awscc_ec2_subnet_route_table_association.private[\"eu-central-1a\"]","mode":"managed","type":"awscc_ec2_subnet_route_table_association","name":"private","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/awscc","schema_version":1,"sensitive_values":{}},{"address":"module.vpcs[\"spoke-vpc-a\"].awscc_ec2_subnet_route_table_association.tgw[\"eu-central-1a\"]","mode":"managed","type":"awscc_ec2_subnet_route_table_association","name":"tgw","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/awscc","schema_version":1,"sensitive_values":{}}],"address":"module.vpcs[\"spoke-vpc-a\"]","child_modules":[{"resources":[{"address":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].aws_flow_log.main","mode":"managed","type":"aws_flow_log","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"destination_options":[],"eni_id":null,"log_destination_type":"cloud-watch-logs","max_aggregation_interval":600,"subnet_id":null,"tags":{"Name":"spoke-vpc-a"},"tags_all":{"Name":"spoke-vpc-a"},"traffic_type":"ALL"},"sensitive_values":{"destination_options":[],"tags":{},"tags_all":{}}}],"address":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0]","child_modules":[{"resources":[{"address":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_cloudwatch_log_group.main","mode":"managed","type":"aws_cloudwatch_log_group","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name_prefix":"spoke-vpc-a-vpc-flow-logs-","retention_in_days":7,"tags":null},"sensitive_values":{"tags_all":{}}},{"address":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_iam_policy.main","mode":"managed","type":"aws_iam_policy","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Cloudwatch permissions policy for spoke-vpc-a with vpc-flow-logs","name_prefix":"spoke-vpc-a-cw-access-policy-","path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"SpokeVpcALogsToCW\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:DescribeLogStreams\",\n        \"logs:DescribeLogGroups\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_iam_role.main","mode":"managed","type":"aws_iam_role","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"SpokeVpcAVpcFlowLogsCloudwatchTrust\",\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": \"vpc-flow-logs.amazonaws.com\"\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n","description":"Cloudwatch permissions role for spoke-vpc-a with vpc-flow-logs","force_detach_policies":false,"max_session_duration":3600,"name_prefix":"spoke-vpc-a-cw-access-role-","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_iam_role_policy_attachment.main","mode":"managed","type":"aws_iam_role_policy_attachment","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}}],"address":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0]"}]}]},{"resources":[{"address":"module.vpcs[\"spoke-vpc-b\"].aws_ec2_transit_gateway_vpc_attachment.tgw[0]","mode":"managed","type":"aws_ec2_transit_gateway_vpc_attachment","name":"tgw","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"appliance_mode_support":"disable","dns_support":"enable","ipv6_support":"disable","tags":null,"transit_gateway_default_route_table_association":false,"transit_gateway_default_route_table_propagation":false},"sensitive_values":{"subnet_ids":[],"tags_all":{}}},{"address":"module.vpcs[\"spoke-vpc-b\"].aws_route.private_to_tgw[\"eu-central-1a:0.0.0.0/0\"]","mode":"managed","type":"aws_route","name":"private_to_tgw","index":"eu-central-1a:0.0.0.0/0","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"nat_gateway_id":null,"timeouts":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"sensitive_values":{}},{"address":"module.vpcs[\"spoke-vpc-b\"].aws_subnet.private[\"eu-central-1a\"]","mode":"managed","type":"aws_subnet","name":"private","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-central-1a","cidr_block":"10.66.5.0/26","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"private-eu-central-1a"},"tags_all":{"Name":"private-eu-central-1a"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpcs[\"spoke-vpc-b\"].aws_subnet.tgw[\"eu-central-1a\"]","mode":"managed","type":"aws_subnet","name":"tgw","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-central-1a","cidr_block":"10.66.5.192/28","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"tgw-eu-central-1a"},"tags_all":{"Name":"tgw-eu-central-1a"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpcs[\"spoke-vpc-b\"].aws_vpc.main[0]","mode":"managed","type":"aws_vpc","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.66.5.0/24","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Name":"spoke-vpc-b"},"tags_all":{"Name":"spoke-vpc-b"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.vpcs[\"spoke-vpc-b\"].awscc_ec2_route_table.private[\"eu-central-1a\"]","mode":"managed","type":"awscc_ec2_route_table","name":"private","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/awscc","schema_version":1,"values":{"tags":[{"key":"Name","value":"private-eu-central-1a"}]},"sensitive_values":{"tags":[{}]}},{"address":"module.vpcs[\"spoke-vpc-b\"].awscc_ec2_route_table.tgw[\"eu-central-1a\"]","mode":"managed","type":"awscc_ec2_route_table","name":"tgw","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/awscc","schema_version":1,"values":{"tags":[{"key":"Name","value":"tgw-eu-central-1a"}]},"sensitive_values":{"tags":[{}]}},{"address":"module.vpcs[\"spoke-vpc-b\"].awscc_ec2_subnet_route_table_association.private[\"eu-central-1a\"]","mode":"managed","type":"awscc_ec2_subnet_route_table_association","name":"private","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/awscc","schema_version":1,"sensitive_values":{}},{"address":"module.vpcs[\"spoke-vpc-b\"].awscc_ec2_subnet_route_table_association.tgw[\"eu-central-1a\"]","mode":"managed","type":"awscc_ec2_subnet_route_table_association","name":"tgw","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/awscc","schema_version":1,"sensitive_values":{}}],"address":"module.vpcs[\"spoke-vpc-b\"]","child_modules":[{"resources":[{"address":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].aws_flow_log.main","mode":"managed","type":"aws_flow_log","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"destination_options":[],"eni_id":null,"log_destination_type":"cloud-watch-logs","max_aggregation_interval":600,"subnet_id":null,"tags":{"Name":"spoke-vpc-b"},"tags_all":{"Name":"spoke-vpc-b"},"traffic_type":"ALL"},"sensitive_values":{"destination_options":[],"tags":{},"tags_all":{}}}],"address":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0]","child_modules":[{"resources":[{"address":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_cloudwatch_log_group.main","mode":"managed","type":"aws_cloudwatch_log_group","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name_prefix":"spoke-vpc-b-vpc-flow-logs-","retention_in_days":7,"tags":null},"sensitive_values":{"tags_all":{}}},{"address":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_iam_policy.main","mode":"managed","type":"aws_iam_policy","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Cloudwatch permissions policy for spoke-vpc-b with vpc-flow-logs","name_prefix":"spoke-vpc-b-cw-access-policy-","path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"SpokeVpcBLogsToCW\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:DescribeLogStreams\",\n        \"logs:DescribeLogGroups\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","tags":null},"sensitive_values":{"tags_all":{}}},{"address":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_iam_role.main","mode":"managed","type":"aws_iam_role","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"SpokeVpcBVpcFlowLogsCloudwatchTrust\",\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": \"vpc-flow-logs.amazonaws.com\"\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n","description":"Cloudwatch permissions role for spoke-vpc-b with vpc-flow-logs","force_detach_policies":false,"max_session_duration":3600,"name_prefix":"spoke-vpc-b-cw-access-role-","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}},{"address":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_iam_role_policy_attachment.main","mode":"managed","type":"aws_iam_role_policy_attachment","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}}],"address":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0]"}]}]}]}},"resource_changes":[{"address":"data.aws_ec2_transit_gateway_dx_gateway_attachment.tgw_dxgw_attachment","mode":"data","type":"aws_ec2_transit_gateway_dx_gateway_attachment","name":"tgw_dxgw_attachment","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"filter":[]},"after_unknown":{"dx_gateway_id":true,"filter":[],"id":true,"tags":true,"transit_gateway_id":true},"before_sensitive":false,"after_sensitive":{"filter":[],"tags":{}}},"action_reason":"read_because_config_unknown"},{"address":"data.aws_ec2_transit_gateway_vpn_attachment.vpn_tgw_attachment","mode":"data","type":"aws_ec2_transit_gateway_vpn_attachment","name":"vpn_tgw_attachment","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"filter":[]},"after_unknown":{"filter":[],"id":true,"tags":true,"transit_gateway_id":true,"vpn_connection_id":true},"before_sensitive":false,"after_sensitive":{"filter":[],"tags":{}}},"action_reason":"read_because_config_unknown"},{"address":"aws_customer_gateway.cgw","mode":"managed","type":"aws_customer_gateway","name":"cgw","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bgp_asn":"64533","certificate_arn":null,"device_name":null,"ip_address":"10.66.3.2","tags":{"Name":"customer_gateway-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"customer_gateway-tgw-dx-private-ip-vpn"},"type":"ipsec.1"},"after_unknown":{"arn":true,"id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_dx_gateway.dxgw[0]","mode":"managed","type":"aws_dx_gateway","name":"dxgw","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"amazon_side_asn":"64531","name":"dxgw-tgw-dx-private-ip-vpn","timeouts":null},"after_unknown":{"id":true,"owner_account_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_dx_gateway_association.dxgw_tgw_association","mode":"managed","type":"aws_dx_gateway_association","name":"dxgw_tgw_association","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"allowed_prefixes":["10.66.0.0/16"],"proposal_id":null,"timeouts":null,"vpn_gateway_id":null},"after_unknown":{"allowed_prefixes":[false],"associated_gateway_id":true,"associated_gateway_owner_account_id":true,"associated_gateway_type":true,"dx_gateway_association_id":true,"dx_gateway_id":true,"dx_gateway_owner_account_id":true,"id":true},"before_sensitive":false,"after_sensitive":{"allowed_prefixes":[false]}}},{"address":"aws_ec2_transit_gateway.tgw","mode":"managed","type":"aws_ec2_transit_gateway","name":"tgw","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"amazon_side_asn":64532,"auto_accept_shared_attachments":"disable","default_route_table_association":"disable","default_route_table_propagation":"disable","description":"transit_gateway-tgw-dx-private-ip-vpn","dns_support":"enable","multicast_support":"disable","tags":{"Name":"transit_gateway-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"transit_gateway-tgw-dx-private-ip-vpn"},"timeouts":null,"transit_gateway_cidr_blocks":["10.66.2.0/24"],"vpn_ecmp_support":"enable"},"after_unknown":{"arn":true,"association_default_route_table_id":true,"id":true,"owner_id":true,"propagation_default_route_table_id":true,"tags":{},"tags_all":{},"transit_gateway_cidr_blocks":[false]},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{},"transit_gateway_cidr_blocks":[false]}}},{"address":"aws_ec2_transit_gateway_route_table.tgw_rt","mode":"managed","type":"aws_ec2_transit_gateway_route_table","name":"tgw_rt","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"tags":{"Name":"tgw-rt-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"tgw-rt-tgw-dx-private-ip-vpn"}},"after_unknown":{"arn":true,"default_association_route_table":true,"default_propagation_route_table":true,"id":true,"tags":{},"tags_all":{},"transit_gateway_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"aws_ec2_transit_gateway_route_table_association.spoke_tgw_association[\"spoke-vpc-a\"]","mode":"managed","type":"aws_ec2_transit_gateway_route_table_association","name":"spoke_tgw_association","index":"spoke-vpc-a","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"id":true,"resource_id":true,"resource_type":true,"transit_gateway_attachment_id":true,"transit_gateway_route_table_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_ec2_transit_gateway_route_table_association.spoke_tgw_association[\"spoke-vpc-b\"]","mode":"managed","type":"aws_ec2_transit_gateway_route_table_association","name":"spoke_tgw_association","index":"spoke-vpc-b","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"id":true,"resource_id":true,"resource_type":true,"transit_gateway_attachment_id":true,"transit_gateway_route_table_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_ec2_transit_gateway_route_table_association.vpn_tgw_association","mode":"managed","type":"aws_ec2_transit_gateway_route_table_association","name":"vpn_tgw_association","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"id":true,"resource_id":true,"resource_type":true,"transit_gateway_attachment_id":true,"transit_gateway_route_table_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_ec2_transit_gateway_route_table_propagation.spoke_tgw_propagation[\"spoke-vpc-a\"]","mode":"managed","type":"aws_ec2_transit_gateway_route_table_propagation","name":"spoke_tgw_propagation","index":"spoke-vpc-a","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"id":true,"resource_id":true,"resource_type":true,"transit_gateway_attachment_id":true,"transit_gateway_route_table_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_ec2_transit_gateway_route_table_propagation.spoke_tgw_propagation[\"spoke-vpc-b\"]","mode":"managed","type":"aws_ec2_transit_gateway_route_table_propagation","name":"spoke_tgw_propagation","index":"spoke-vpc-b","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"id":true,"resource_id":true,"resource_type":true,"transit_gateway_attachment_id":true,"transit_gateway_route_table_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_ec2_transit_gateway_route_table_propagation.vpn_tgw_propagation","mode":"managed","type":"aws_ec2_transit_gateway_route_table_propagation","name":"vpn_tgw_propagation","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"id":true,"resource_id":true,"resource_type":true,"transit_gateway_attachment_id":true,"transit_gateway_route_table_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"aws_vpn_connection.private_ip_vpn","mode":"managed","type":"aws_vpn_connection","name":"private_ip_vpn","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"outside_ip_address_type":"PrivateIpv4","tags":{"Name":"vpn-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"vpn-tgw-dx-private-ip-vpn"},"tunnel1_dpd_timeout_action":null,"tunnel1_dpd_timeout_seconds":null,"tunnel1_ike_versions":null,"tunnel1_phase1_dh_group_numbers":null,"tunnel1_phase1_encryption_algorithms":null,"tunnel1_phase1_integrity_algorithms":null,"tunnel1_phase1_lifetime_seconds":null,"tunnel1_phase2_dh_group_numbers":null,"tunnel1_phase2_encryption_algorithms":null,"tunnel1_phase2_integrity_algorithms":null,"tunnel1_phase2_lifetime_seconds":null,"tunnel1_rekey_fuzz_percentage":null,"tunnel1_rekey_margin_time_seconds":null,"tunnel1_replay_window_size":null,"tunnel1_startup_action":null,"tunnel2_dpd_timeout_action":null,"tunnel2_dpd_timeout_seconds":null,"tunnel2_ike_versions":null,"tunnel2_phase1_dh_group_numbers":null,"tunnel2_phase1_encryption_algorithms":null,"tunnel2_phase1_integrity_algorithms":null,"tunnel2_phase1_lifetime_seconds":null,"tunnel2_phase2_dh_group_numbers":null,"tunnel2_phase2_encryption_algorithms":null,"tunnel2_phase2_integrity_algorithms":null,"tunnel2_phase2_lifetime_seconds":null,"tunnel2_rekey_fuzz_percentage":null,"tunnel2_rekey_margin_time_seconds":null,"tunnel2_replay_window_size":null,"tunnel2_startup_action":null,"type":"ipsec.1","vpn_gateway_id":null},"after_unknown":{"arn":true,"core_network_arn":true,"core_network_attachment_arn":true,"customer_gateway_configuration":true,"customer_gateway_id":true,"enable_acceleration":true,"id":true,"local_ipv4_network_cidr":true,"local_ipv6_network_cidr":true,"remote_ipv4_network_cidr":true,"remote_ipv6_network_cidr":true,"routes":true,"static_routes_only":true,"tags":{},"tags_all":{},"transit_gateway_attachment_id":true,"transit_gateway_id":true,"transport_transit_gateway_attachment_id":true,"tunnel1_address":true,"tunnel1_bgp_asn":true,"tunnel1_bgp_holdtime":true,"tunnel1_cgw_inside_address":true,"tunnel1_inside_cidr":true,"tunnel1_inside_ipv6_cidr":true,"tunnel1_preshared_key":true,"tunnel1_vgw_inside_address":true,"tunnel2_address":true,"tunnel2_bgp_asn":true,"tunnel2_bgp_holdtime":true,"tunnel2_cgw_inside_address":true,"tunnel2_inside_cidr":true,"tunnel2_inside_ipv6_cidr":true,"tunnel2_preshared_key":true,"tunnel2_vgw_inside_address":true,"tunnel_inside_ip_version":true,"vgw_telemetry":true},"before_sensitive":false,"after_sensitive":{"customer_gateway_configuration":true,"routes":[],"tags":{},"tags_all":{},"tunnel1_preshared_key":true,"tunnel2_preshared_key":true,"vgw_telemetry":[]}}},{"address":"module.compute[\"spoke-vpc-a\"].aws_instance.ec2_instance[0]","module_address":"module.compute[\"spoke-vpc-a\"]","mode":"managed","type":"aws_instance","name":"ec2_instance","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-086ecbd485d8bb032","associate_public_ip_address":false,"credit_specification":[],"get_password_data":false,"hibernation":null,"instance_type":"t2.micro","launch_template":[],"metadata_options":[{"http_endpoint":"enabled","http_tokens":"required","instance_metadata_tags":"disabled"}],"root_block_device":[{"delete_on_termination":true,"encrypted":true,"tags":null}],"source_dest_check":true,"tags":{"Name":"spoke-vpc-a-instance-1-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"spoke-vpc-a-instance-1-tgw-dx-private-ip-vpn"},"timeouts":null,"user_data_replace_on_change":false,"volume_tags":null},"after_unknown":{"arn":true,"availability_zone":true,"capacity_reservation_specification":true,"cpu_core_count":true,"cpu_threads_per_core":true,"credit_specification":[],"disable_api_stop":true,"disable_api_termination":true,"ebs_block_device":true,"ebs_optimized":true,"enclave_options":true,"ephemeral_block_device":true,"host_id":true,"iam_instance_profile":true,"id":true,"instance_initiated_shutdown_behavior":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"key_name":true,"launch_template":[],"maintenance_options":true,"metadata_options":[{"http_put_response_hop_limit":true}],"monitoring":true,"network_interface":true,"outpost_arn":true,"password_data":true,"placement_group":true,"placement_partition_number":true,"primary_network_interface_id":true,"private_dns":true,"private_dns_name_options":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":[{"device_name":true,"iops":true,"kms_key_id":true,"throughput":true,"volume_id":true,"volume_size":true,"volume_type":true}],"secondary_private_ips":true,"security_groups":true,"subnet_id":true,"tags":{},"tags_all":{},"tenancy":true,"user_data":true,"user_data_base64":true,"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"capacity_reservation_specification":[],"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[],"root_block_device":[{}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"module.compute[\"spoke-vpc-a\"].aws_security_group.spoke_vpc_sg","module_address":"module.compute[\"spoke-vpc-a\"]","mode":"managed","type":"aws_security_group","name":"spoke_vpc_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security Group used in the EC2 instances","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Any traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allowing HTTP traffic","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80},{"cidr_blocks":["0.0.0.0/0"],"description":"Allowing ICMP traffic","from_port":-1,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"icmp","security_groups":[],"self":false,"to_port":-1}],"name":"instance_sg","revoke_rules_on_delete":false,"tags":{"Name":"spoke-vpc-a-instance-security-group-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"spoke-vpc-a-instance-security-group-tgw-dx-private-ip-vpn"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.compute[\"spoke-vpc-b\"].aws_instance.ec2_instance[0]","module_address":"module.compute[\"spoke-vpc-b\"]","mode":"managed","type":"aws_instance","name":"ec2_instance","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"ami":"ami-086ecbd485d8bb032","associate_public_ip_address":false,"credit_specification":[],"get_password_data":false,"hibernation":null,"instance_type":"t2.micro","launch_template":[],"metadata_options":[{"http_endpoint":"enabled","http_tokens":"required","instance_metadata_tags":"disabled"}],"root_block_device":[{"delete_on_termination":true,"encrypted":true,"tags":null}],"source_dest_check":true,"tags":{"Name":"spoke-vpc-b-instance-1-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"spoke-vpc-b-instance-1-tgw-dx-private-ip-vpn"},"timeouts":null,"user_data_replace_on_change":false,"volume_tags":null},"after_unknown":{"arn":true,"availability_zone":true,"capacity_reservation_specification":true,"cpu_core_count":true,"cpu_threads_per_core":true,"credit_specification":[],"disable_api_stop":true,"disable_api_termination":true,"ebs_block_device":true,"ebs_optimized":true,"enclave_options":true,"ephemeral_block_device":true,"host_id":true,"iam_instance_profile":true,"id":true,"instance_initiated_shutdown_behavior":true,"instance_state":true,"ipv6_address_count":true,"ipv6_addresses":true,"key_name":true,"launch_template":[],"maintenance_options":true,"metadata_options":[{"http_put_response_hop_limit":true}],"monitoring":true,"network_interface":true,"outpost_arn":true,"password_data":true,"placement_group":true,"placement_partition_number":true,"primary_network_interface_id":true,"private_dns":true,"private_dns_name_options":true,"private_ip":true,"public_dns":true,"public_ip":true,"root_block_device":[{"device_name":true,"iops":true,"kms_key_id":true,"throughput":true,"volume_id":true,"volume_size":true,"volume_type":true}],"secondary_private_ips":true,"security_groups":true,"subnet_id":true,"tags":{},"tags_all":{},"tenancy":true,"user_data":true,"user_data_base64":true,"vpc_security_group_ids":true},"before_sensitive":false,"after_sensitive":{"capacity_reservation_specification":[],"credit_specification":[],"ebs_block_device":[],"enclave_options":[],"ephemeral_block_device":[],"ipv6_addresses":[],"launch_template":[],"maintenance_options":[],"metadata_options":[{}],"network_interface":[],"private_dns_name_options":[],"root_block_device":[{}],"secondary_private_ips":[],"security_groups":[],"tags":{},"tags_all":{},"vpc_security_group_ids":[]}}},{"address":"module.compute[\"spoke-vpc-b\"].aws_security_group.spoke_vpc_sg","module_address":"module.compute[\"spoke-vpc-b\"]","mode":"managed","type":"aws_security_group","name":"spoke_vpc_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security Group used in the EC2 instances","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Any traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allowing HTTP traffic","from_port":80,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":80},{"cidr_blocks":["0.0.0.0/0"],"description":"Allowing ICMP traffic","from_port":-1,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"icmp","security_groups":[],"self":false,"to_port":-1}],"name":"instance_sg","revoke_rules_on_delete":false,"tags":{"Name":"spoke-vpc-b-instance-security-group-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"spoke-vpc-b-instance-security-group-tgw-dx-private-ip-vpn"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]},{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.iam_kms.aws_iam_instance_profile.ec2_instance_profile","module_address":"module.iam_kms","mode":"managed","type":"aws_iam_instance_profile","name":"ec2_instance_profile","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"ec2_instance_profile_tgw-dx-private-ip-vpn","name_prefix":null,"path":"/","tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"role":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.iam_kms.aws_iam_policy_attachment.s3_readonly_policy_attachment","module_address":"module.iam_kms","mode":"managed","type":"aws_iam_policy_attachment","name":"s3_readonly_policy_attachment","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"groups":null,"name":"s3_readonly_policy_attachment_tgw-dx-private-ip-vpn","policy_arn":"arn:aws:iam::aws:policy/AmazonS3ReadOnlyAccess","users":null},"after_unknown":{"id":true,"roles":true},"before_sensitive":false,"after_sensitive":{"roles":[]}}},{"address":"module.iam_kms.aws_iam_policy_attachment.ssm_iam_role_policy_attachment","module_address":"module.iam_kms","mode":"managed","type":"aws_iam_policy_attachment","name":"ssm_iam_role_policy_attachment","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"groups":null,"name":"ssm_iam_role_policy_attachment_tgw-dx-private-ip-vpn","policy_arn":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore","users":null},"after_unknown":{"id":true,"roles":true},"before_sensitive":false,"after_sensitive":{"roles":[]}}},{"address":"module.iam_kms.aws_iam_policy_attachment.ssm_iam_service_role_attachment","module_address":"module.iam_kms","mode":"managed","type":"aws_iam_policy_attachment","name":"ssm_iam_service_role_attachment","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"groups":null,"name":"ssm_iam_service_role_attachment_tgw-dx-private-ip-vpn","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonEC2RoleforSSM","users":null},"after_unknown":{"id":true,"roles":true},"before_sensitive":false,"after_sensitive":{"roles":[]}}},{"address":"module.iam_kms.aws_iam_role.role_ec2","module_address":"module.iam_kms","mode":"managed","type":"aws_iam_role","name":"role_ec2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"1\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      }\n    }\n  ]\n}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"ec2_ssm_role_tgw-dx-private-ip-vpn","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"module.iam_kms.aws_iam_role.vpc_flowlogs_role","module_address":"module.iam_kms","mode":"managed","type":"aws_iam_role","name":"vpc_flowlogs_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"1\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"vpc-flow-logs.amazonaws.com\"\n      }\n    }\n  ]\n}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"vpc-flowlog-role-tgw-dx-private-ip-vpn","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"module.iam_kms.aws_iam_role_policy.vpc_flowlogs_role_policy","module_address":"module.iam_kms","mode":"managed","type":"aws_iam_role_policy","name":"vpc_flowlogs_role_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"vpc-flowlog-role-policy-tgw-dx-private-ip-vpn","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"2\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:DescribeLogStreams\",\n        \"logs:DescribeLogGroup\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"arn:aws:logs:eu-central-1:219608582189:*\"\n    }\n  ]\n}"},"after_unknown":{"id":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.iam_kms.aws_kms_key.log_key","module_address":"module.iam_kms","mode":"managed","type":"aws_kms_key","name":"log_key","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bypass_policy_lockout_safety_check":false,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":7,"description":"KMS Logs Key","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Enable IAM User Permissions\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:*\",\n      \"Resource\": \"arn:aws:kms:eu-central-1:219608582189:*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::219608582189:root\"\n      }\n    },\n    {\n      \"Sid\": \"Enable KMS to be used by CloudWatch Logs\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ReEncrypt*\",\n        \"kms:GenerateDataKey*\",\n        \"kms:Encrypt*\",\n        \"kms:Describe*\",\n        \"kms:Decrypt*\"\n      ],\n      \"Resource\": \"arn:aws:kms:eu-central-1:219608582189:*\",\n      \"Principal\": {\n        \"Service\": \"logs.eu-central-1.amazonaws.com\"\n      },\n      \"Condition\": {\n        \"ArnLike\": {\n          \"kms:EncryptionContext:aws:logs:arn\": \"arn:aws:logs:eu-central-1:219608582189:*\"\n        }\n      }\n    }\n  ]\n}","tags":{"Name":"kms-key-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"kms-key-tgw-dx-private-ip-vpn"}},"after_unknown":{"arn":true,"id":true,"key_id":true,"multi_region":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpc_endpoints[\"spoke-vpc-a\"].aws_security_group.endpoints_vpc_sg","module_address":"module.vpc_endpoints[\"spoke-vpc-a\"]","mode":"managed","type":"aws_security_group","name":"endpoints_vpc_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security Group for SSM connection","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Any traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allowing HTTPS","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"endpoints_sg","revoke_rules_on_delete":false,"tags":{"Name":"spoke-vpc-a-endpoints-security-group-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"spoke-vpc-a-endpoints-security-group-tgw-dx-private-ip-vpn"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.vpc_endpoints[\"spoke-vpc-a\"].aws_vpc_endpoint.endpoint[\"ec2messages\"]","module_address":"module.vpc_endpoints[\"spoke-vpc-a\"]","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint","index":"ec2messages","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"service_name":"com.amazonaws.eu-central-1.ec2messages","tags":null,"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"state":true,"subnet_ids":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_ids":[],"tags_all":{}}}},{"address":"module.vpc_endpoints[\"spoke-vpc-a\"].aws_vpc_endpoint.endpoint[\"ssm\"]","module_address":"module.vpc_endpoints[\"spoke-vpc-a\"]","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint","index":"ssm","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"service_name":"com.amazonaws.eu-central-1.ssm","tags":null,"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"state":true,"subnet_ids":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_ids":[],"tags_all":{}}}},{"address":"module.vpc_endpoints[\"spoke-vpc-a\"].aws_vpc_endpoint.endpoint[\"ssmmessages\"]","module_address":"module.vpc_endpoints[\"spoke-vpc-a\"]","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint","index":"ssmmessages","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"service_name":"com.amazonaws.eu-central-1.ssmmessages","tags":null,"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"state":true,"subnet_ids":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_ids":[],"tags_all":{}}}},{"address":"module.vpc_endpoints[\"spoke-vpc-b\"].aws_security_group.endpoints_vpc_sg","module_address":"module.vpc_endpoints[\"spoke-vpc-b\"]","mode":"managed","type":"aws_security_group","name":"endpoints_vpc_sg","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security Group for SSM connection","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Any traffic","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["0.0.0.0/0"],"description":"Allowing HTTPS","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"endpoints_sg","revoke_rules_on_delete":false,"tags":{"Name":"spoke-vpc-b-endpoints-security-group-tgw-dx-private-ip-vpn"},"tags_all":{"Name":"spoke-vpc-b-endpoints-security-group-tgw-dx-private-ip-vpn"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.vpc_endpoints[\"spoke-vpc-b\"].aws_vpc_endpoint.endpoint[\"ec2messages\"]","module_address":"module.vpc_endpoints[\"spoke-vpc-b\"]","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint","index":"ec2messages","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"service_name":"com.amazonaws.eu-central-1.ec2messages","tags":null,"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"state":true,"subnet_ids":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_ids":[],"tags_all":{}}}},{"address":"module.vpc_endpoints[\"spoke-vpc-b\"].aws_vpc_endpoint.endpoint[\"ssm\"]","module_address":"module.vpc_endpoints[\"spoke-vpc-b\"]","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint","index":"ssm","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"service_name":"com.amazonaws.eu-central-1.ssm","tags":null,"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"state":true,"subnet_ids":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_ids":[],"tags_all":{}}}},{"address":"module.vpc_endpoints[\"spoke-vpc-b\"].aws_vpc_endpoint.endpoint[\"ssmmessages\"]","module_address":"module.vpc_endpoints[\"spoke-vpc-b\"]","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint","index":"ssmmessages","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"auto_accept":null,"private_dns_enabled":true,"service_name":"com.amazonaws.eu-central-1.ssmmessages","tags":null,"timeouts":null,"vpc_endpoint_type":"Interface"},"after_unknown":{"arn":true,"cidr_blocks":true,"dns_entry":true,"dns_options":true,"id":true,"ip_address_type":true,"network_interface_ids":true,"owner_id":true,"policy":true,"prefix_list_id":true,"requester_managed":true,"route_table_ids":true,"security_group_ids":true,"state":true,"subnet_ids":true,"tags_all":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"cidr_blocks":[],"dns_entry":[],"dns_options":[],"network_interface_ids":[],"route_table_ids":[],"security_group_ids":[],"subnet_ids":[],"tags_all":{}}}},{"address":"module.vpcs[\"spoke-vpc-a\"].aws_ec2_transit_gateway_vpc_attachment.tgw[0]","module_address":"module.vpcs[\"spoke-vpc-a\"]","mode":"managed","type":"aws_ec2_transit_gateway_vpc_attachment","name":"tgw","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"appliance_mode_support":"disable","dns_support":"enable","ipv6_support":"disable","tags":null,"transit_gateway_default_route_table_association":false,"transit_gateway_default_route_table_propagation":false},"after_unknown":{"id":true,"subnet_ids":true,"tags_all":true,"transit_gateway_id":true,"vpc_id":true,"vpc_owner_id":true},"before_sensitive":false,"after_sensitive":{"subnet_ids":[],"tags_all":{}}}},{"address":"module.vpcs[\"spoke-vpc-a\"].aws_route.private_to_tgw[\"eu-central-1a:0.0.0.0/0\"]","module_address":"module.vpcs[\"spoke-vpc-a\"]","mode":"managed","type":"aws_route","name":"private_to_tgw","index":"eu-central-1a:0.0.0.0/0","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"nat_gateway_id":null,"timeouts":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"id":true,"instance_id":true,"instance_owner_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true,"transit_gateway_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpcs[\"spoke-vpc-a\"].aws_subnet.private[\"eu-central-1a\"]","module_address":"module.vpcs[\"spoke-vpc-a\"]","mode":"managed","type":"aws_subnet","name":"private","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-central-1a","cidr_block":"10.66.4.0/26","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"private-eu-central-1a"},"tags_all":{"Name":"private-eu-central-1a"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpcs[\"spoke-vpc-a\"].aws_subnet.tgw[\"eu-central-1a\"]","module_address":"module.vpcs[\"spoke-vpc-a\"]","mode":"managed","type":"aws_subnet","name":"tgw","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-central-1a","cidr_block":"10.66.4.192/28","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"tgw-eu-central-1a"},"tags_all":{"Name":"tgw-eu-central-1a"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpcs[\"spoke-vpc-a\"].aws_vpc.main[0]","module_address":"module.vpcs[\"spoke-vpc-a\"]","mode":"managed","type":"aws_vpc","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.66.4.0/24","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Name":"spoke-vpc-a"},"tags_all":{"Name":"spoke-vpc-a"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_classiclink":true,"enable_classiclink_dns_support":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_network_border_group":true,"main_route_table_id":true,"owner_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpcs[\"spoke-vpc-a\"].awscc_ec2_route_table.private[\"eu-central-1a\"]","module_address":"module.vpcs[\"spoke-vpc-a\"]","mode":"managed","type":"awscc_ec2_route_table","name":"private","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/awscc","change":{"actions":["create"],"before":null,"after":{"tags":[{"key":"Name","value":"private-eu-central-1a"}]},"after_unknown":{"id":true,"route_table_id":true,"tags":[{}],"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":[{}]}}},{"address":"module.vpcs[\"spoke-vpc-a\"].awscc_ec2_route_table.tgw[\"eu-central-1a\"]","module_address":"module.vpcs[\"spoke-vpc-a\"]","mode":"managed","type":"awscc_ec2_route_table","name":"tgw","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/awscc","change":{"actions":["create"],"before":null,"after":{"tags":[{"key":"Name","value":"tgw-eu-central-1a"}]},"after_unknown":{"id":true,"route_table_id":true,"tags":[{}],"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":[{}]}}},{"address":"module.vpcs[\"spoke-vpc-a\"].awscc_ec2_subnet_route_table_association.private[\"eu-central-1a\"]","module_address":"module.vpcs[\"spoke-vpc-a\"]","mode":"managed","type":"awscc_ec2_subnet_route_table_association","name":"private","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/awscc","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpcs[\"spoke-vpc-a\"].awscc_ec2_subnet_route_table_association.tgw[\"eu-central-1a\"]","module_address":"module.vpcs[\"spoke-vpc-a\"]","mode":"managed","type":"awscc_ec2_subnet_route_table_association","name":"tgw","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/awscc","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpcs[\"spoke-vpc-b\"].aws_ec2_transit_gateway_vpc_attachment.tgw[0]","module_address":"module.vpcs[\"spoke-vpc-b\"]","mode":"managed","type":"aws_ec2_transit_gateway_vpc_attachment","name":"tgw","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"appliance_mode_support":"disable","dns_support":"enable","ipv6_support":"disable","tags":null,"transit_gateway_default_route_table_association":false,"transit_gateway_default_route_table_propagation":false},"after_unknown":{"id":true,"subnet_ids":true,"tags_all":true,"transit_gateway_id":true,"vpc_id":true,"vpc_owner_id":true},"before_sensitive":false,"after_sensitive":{"subnet_ids":[],"tags_all":{}}}},{"address":"module.vpcs[\"spoke-vpc-b\"].aws_route.private_to_tgw[\"eu-central-1a:0.0.0.0/0\"]","module_address":"module.vpcs[\"spoke-vpc-b\"]","mode":"managed","type":"aws_route","name":"private_to_tgw","index":"eu-central-1a:0.0.0.0/0","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"carrier_gateway_id":null,"core_network_arn":null,"destination_cidr_block":"0.0.0.0/0","destination_ipv6_cidr_block":null,"destination_prefix_list_id":null,"egress_only_gateway_id":null,"gateway_id":null,"local_gateway_id":null,"nat_gateway_id":null,"timeouts":null,"vpc_endpoint_id":null,"vpc_peering_connection_id":null},"after_unknown":{"id":true,"instance_id":true,"instance_owner_id":true,"network_interface_id":true,"origin":true,"route_table_id":true,"state":true,"transit_gateway_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpcs[\"spoke-vpc-b\"].aws_subnet.private[\"eu-central-1a\"]","module_address":"module.vpcs[\"spoke-vpc-b\"]","mode":"managed","type":"aws_subnet","name":"private","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-central-1a","cidr_block":"10.66.5.0/26","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"private-eu-central-1a"},"tags_all":{"Name":"private-eu-central-1a"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpcs[\"spoke-vpc-b\"].aws_subnet.tgw[\"eu-central-1a\"]","module_address":"module.vpcs[\"spoke-vpc-b\"]","mode":"managed","type":"aws_subnet","name":"tgw","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"eu-central-1a","cidr_block":"10.66.5.192/28","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Name":"tgw-eu-central-1a"},"tags_all":{"Name":"tgw-eu-central-1a"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpcs[\"spoke-vpc-b\"].aws_vpc.main[0]","module_address":"module.vpcs[\"spoke-vpc-b\"]","mode":"managed","type":"aws_vpc","name":"main","index":0,"provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.66.5.0/24","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Name":"spoke-vpc-b"},"tags_all":{"Name":"spoke-vpc-b"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_classiclink":true,"enable_classiclink_dns_support":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_network_border_group":true,"main_route_table_id":true,"owner_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.vpcs[\"spoke-vpc-b\"].awscc_ec2_route_table.private[\"eu-central-1a\"]","module_address":"module.vpcs[\"spoke-vpc-b\"]","mode":"managed","type":"awscc_ec2_route_table","name":"private","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/awscc","change":{"actions":["create"],"before":null,"after":{"tags":[{"key":"Name","value":"private-eu-central-1a"}]},"after_unknown":{"id":true,"route_table_id":true,"tags":[{}],"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":[{}]}}},{"address":"module.vpcs[\"spoke-vpc-b\"].awscc_ec2_route_table.tgw[\"eu-central-1a\"]","module_address":"module.vpcs[\"spoke-vpc-b\"]","mode":"managed","type":"awscc_ec2_route_table","name":"tgw","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/awscc","change":{"actions":["create"],"before":null,"after":{"tags":[{"key":"Name","value":"tgw-eu-central-1a"}]},"after_unknown":{"id":true,"route_table_id":true,"tags":[{}],"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":[{}]}}},{"address":"module.vpcs[\"spoke-vpc-b\"].awscc_ec2_subnet_route_table_association.private[\"eu-central-1a\"]","module_address":"module.vpcs[\"spoke-vpc-b\"]","mode":"managed","type":"awscc_ec2_subnet_route_table_association","name":"private","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/awscc","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpcs[\"spoke-vpc-b\"].awscc_ec2_subnet_route_table_association.tgw[\"eu-central-1a\"]","module_address":"module.vpcs[\"spoke-vpc-b\"]","mode":"managed","type":"awscc_ec2_subnet_route_table_association","name":"tgw","index":"eu-central-1a","provider_name":"registry.terraform.io/hashicorp/awscc","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].aws_flow_log.main","module_address":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0]","mode":"managed","type":"aws_flow_log","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"destination_options":[],"eni_id":null,"log_destination_type":"cloud-watch-logs","max_aggregation_interval":600,"subnet_id":null,"tags":{"Name":"spoke-vpc-a"},"tags_all":{"Name":"spoke-vpc-a"},"traffic_type":"ALL"},"after_unknown":{"arn":true,"destination_options":[],"iam_role_arn":true,"id":true,"log_destination":true,"log_format":true,"log_group_name":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"destination_options":[],"tags":{},"tags_all":{}}}},{"address":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].aws_flow_log.main","module_address":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0]","mode":"managed","type":"aws_flow_log","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"destination_options":[],"eni_id":null,"log_destination_type":"cloud-watch-logs","max_aggregation_interval":600,"subnet_id":null,"tags":{"Name":"spoke-vpc-b"},"tags_all":{"Name":"spoke-vpc-b"},"traffic_type":"ALL"},"after_unknown":{"arn":true,"destination_options":[],"iam_role_arn":true,"id":true,"log_destination":true,"log_format":true,"log_group_name":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"destination_options":[],"tags":{},"tags_all":{}}}},{"address":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_cloudwatch_log_group.main","module_address":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0]","mode":"managed","type":"aws_cloudwatch_log_group","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name_prefix":"spoke-vpc-a-vpc-flow-logs-","retention_in_days":7,"tags":null},"after_unknown":{"arn":true,"id":true,"kms_key_id":true,"name":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_iam_policy.main","module_address":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0]","mode":"managed","type":"aws_iam_policy","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Cloudwatch permissions policy for spoke-vpc-a with vpc-flow-logs","name_prefix":"spoke-vpc-a-cw-access-policy-","path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"SpokeVpcALogsToCW\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:DescribeLogStreams\",\n        \"logs:DescribeLogGroups\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","tags":null},"after_unknown":{"arn":true,"id":true,"name":true,"policy_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_iam_role.main","module_address":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0]","mode":"managed","type":"aws_iam_role","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"SpokeVpcAVpcFlowLogsCloudwatchTrust\",\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": \"vpc-flow-logs.amazonaws.com\"\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n","description":"Cloudwatch permissions role for spoke-vpc-a with vpc-flow-logs","force_detach_policies":false,"max_session_duration":3600,"name_prefix":"spoke-vpc-a-cw-access-role-","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_iam_role_policy_attachment.main","module_address":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"id":true,"policy_arn":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_cloudwatch_log_group.main","module_address":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0]","mode":"managed","type":"aws_cloudwatch_log_group","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name_prefix":"spoke-vpc-b-vpc-flow-logs-","retention_in_days":7,"tags":null},"after_unknown":{"arn":true,"id":true,"kms_key_id":true,"name":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_iam_policy.main","module_address":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0]","mode":"managed","type":"aws_iam_policy","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Cloudwatch permissions policy for spoke-vpc-b with vpc-flow-logs","name_prefix":"spoke-vpc-b-cw-access-policy-","path":"/","policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"SpokeVpcBLogsToCW\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:DescribeLogStreams\",\n        \"logs:DescribeLogGroups\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","tags":null},"after_unknown":{"arn":true,"id":true,"name":true,"policy_id":true,"tags_all":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_iam_role.main","module_address":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0]","mode":"managed","type":"aws_iam_role","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"SpokeVpcBVpcFlowLogsCloudwatchTrust\",\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": \"vpc-flow-logs.amazonaws.com\"\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n","description":"Cloudwatch permissions role for spoke-vpc-b with vpc-flow-logs","force_detach_policies":false,"max_session_duration":3600,"name_prefix":"spoke-vpc-b-cw-access-role-","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags_all":{}}}},{"address":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_iam_role_policy_attachment.main","module_address":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0]","mode":"managed","type":"aws_iam_role_policy_attachment","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"id":true,"policy_arn":true,"role":true},"before_sensitive":false,"after_sensitive":{}}}],"output_changes":{"customer_gateway_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"dx_gateway_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"ec2_instances":{"actions":["create"],"before":null,"after":{"spoke-vpc-a":{"instances_created":[null]},"spoke-vpc-b":{"instances_created":[null]}},"after_unknown":{"spoke-vpc-a":{"instances_created":[true]},"spoke-vpc-b":{"instances_created":[true]}},"before_sensitive":false,"after_sensitive":false},"private_ip_vpn_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"ssm_endpoints":{"actions":["create"],"before":null,"after":{"spoke-vpc-a":{"endpoint_dns":{},"endpoints":{}},"spoke-vpc-b":{"endpoint_dns":{},"endpoints":{}}},"after_unknown":{"spoke-vpc-a":{"endpoint_dns":{"ec2messages":true,"ssm":true,"ssmmessages":true},"endpoints":{"ec2messages":true,"ssm":true,"ssmmessages":true}},"spoke-vpc-b":{"endpoint_dns":{"ec2messages":true,"ssm":true,"ssmmessages":true},"endpoints":{"ec2messages":true,"ssm":true,"ssmmessages":true}}},"before_sensitive":false,"after_sensitive":false},"transit_gateway_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"vpcs":{"actions":["create"],"before":null,"after":{},"after_unknown":{"spoke-vpc-a":true,"spoke-vpc-b":true},"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.11.2","values":{"root_module":{"child_modules":[{"resources":[{"address":"module.compute[\"spoke-vpc-a\"].data.aws_ami.amazon_linux","mode":"data","type":"aws_ami","name":"amazon_linux","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architecture":"x86_64","arn":"arn:aws:ec2:eu-central-1::image/ami-086ecbd485d8bb032","block_device_mappings":[{"device_name":"/dev/xvda","ebs":{"delete_on_termination":"true","encrypted":"false","iops":"0","snapshot_id":"snap-0a38ee409838409aa","throughput":"0","volume_size":"8","volume_type":"gp2"},"no_device":"","virtual_name":""}],"boot_mode":"","creation_date":"2025-03-05T01:36:07.000Z","deprecation_time":"2025-07-01T00:00:00.000Z","description":"Amazon Linux 2 AMI 2.0.20250305.0 x86_64 HVM gp2","ena_support":true,"executable_users":null,"filter":[{"name":"name","values":["amzn2-ami-hvm-*-x86_64-gp2"]},{"name":"owner-alias","values":["amazon"]}],"hypervisor":"xen","id":"ami-086ecbd485d8bb032","image_id":"ami-086ecbd485d8bb032","image_location":"amazon/amzn2-ami-hvm-2.0.20250305.0-x86_64-gp2","image_owner_alias":"amazon","image_type":"machine","kernel_id":"","most_recent":true,"name":"amzn2-ami-hvm-2.0.20250305.0-x86_64-gp2","name_regex":null,"owner_id":"137112412989","owners":["amazon"],"platform":"","platform_details":"Linux/UNIX","product_codes":[],"public":true,"ramdisk_id":"","root_device_name":"/dev/xvda","root_device_type":"ebs","root_snapshot_id":"snap-0a38ee409838409aa","sriov_net_support":"simple","state":"available","state_reason":{"code":"UNSET","message":"UNSET"},"tags":{},"tpm_support":"","usage_operation":"RunInstances","virtualization_type":"hvm"},"sensitive_values":{"block_device_mappings":[{"ebs":{}}],"filter":[{"values":[false]},{"values":[false]}],"owners":[false],"product_codes":[],"state_reason":{},"tags":{}}}],"address":"module.compute[\"spoke-vpc-a\"]"},{"resources":[{"address":"module.compute[\"spoke-vpc-b\"].data.aws_ami.amazon_linux","mode":"data","type":"aws_ami","name":"amazon_linux","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"architecture":"x86_64","arn":"arn:aws:ec2:eu-central-1::image/ami-086ecbd485d8bb032","block_device_mappings":[{"device_name":"/dev/xvda","ebs":{"delete_on_termination":"true","encrypted":"false","iops":"0","snapshot_id":"snap-0a38ee409838409aa","throughput":"0","volume_size":"8","volume_type":"gp2"},"no_device":"","virtual_name":""}],"boot_mode":"","creation_date":"2025-03-05T01:36:07.000Z","deprecation_time":"2025-07-01T00:00:00.000Z","description":"Amazon Linux 2 AMI 2.0.20250305.0 x86_64 HVM gp2","ena_support":true,"executable_users":null,"filter":[{"name":"name","values":["amzn2-ami-hvm-*-x86_64-gp2"]},{"name":"owner-alias","values":["amazon"]}],"hypervisor":"xen","id":"ami-086ecbd485d8bb032","image_id":"ami-086ecbd485d8bb032","image_location":"amazon/amzn2-ami-hvm-2.0.20250305.0-x86_64-gp2","image_owner_alias":"amazon","image_type":"machine","kernel_id":"","most_recent":true,"name":"amzn2-ami-hvm-2.0.20250305.0-x86_64-gp2","name_regex":null,"owner_id":"137112412989","owners":["amazon"],"platform":"","platform_details":"Linux/UNIX","product_codes":[],"public":true,"ramdisk_id":"","root_device_name":"/dev/xvda","root_device_type":"ebs","root_snapshot_id":"snap-0a38ee409838409aa","sriov_net_support":"simple","state":"available","state_reason":{"code":"UNSET","message":"UNSET"},"tags":{},"tpm_support":"","usage_operation":"RunInstances","virtualization_type":"hvm"},"sensitive_values":{"block_device_mappings":[{"ebs":{}}],"filter":[{"values":[false]},{"values":[false]}],"owners":[false],"product_codes":[],"state_reason":{},"tags":{}}}],"address":"module.compute[\"spoke-vpc-b\"]"},{"resources":[{"address":"module.iam_kms.data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"account_id":"219608582189","arn":"arn:aws:sts::219608582189:assumed-role/AWSReservedSSO_GlobalAdministrator_c5270c2949193c2c/gareth.jones@kraken.tech","id":"219608582189","user_id":"AROATGINRBAWVNZBIL3MD:gareth.jones@kraken.tech"},"sensitive_values":{}},{"address":"module.iam_kms.data.aws_iam_policy_document.policy_document","mode":"data","type":"aws_iam_policy_document","name":"policy_document","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"3833428742","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"1\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      }\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["ec2.amazonaws.com"],"type":"Service"}],"resources":[],"sid":"1"}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"module.iam_kms.data.aws_iam_policy_document.policy_kms_logs_document","mode":"data","type":"aws_iam_policy_document","name":"policy_kms_logs_document","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"1681479592","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"Enable IAM User Permissions\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"kms:*\",\n      \"Resource\": \"arn:aws:kms:eu-central-1:219608582189:*\",\n      \"Principal\": {\n        \"AWS\": \"arn:aws:iam::219608582189:root\"\n      }\n    },\n    {\n      \"Sid\": \"Enable KMS to be used by CloudWatch Logs\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"kms:ReEncrypt*\",\n        \"kms:GenerateDataKey*\",\n        \"kms:Encrypt*\",\n        \"kms:Describe*\",\n        \"kms:Decrypt*\"\n      ],\n      \"Resource\": \"arn:aws:kms:eu-central-1:219608582189:*\",\n      \"Principal\": {\n        \"Service\": \"logs.eu-central-1.amazonaws.com\"\n      },\n      \"Condition\": {\n        \"ArnLike\": {\n          \"kms:EncryptionContext:aws:logs:arn\": \"arn:aws:logs:eu-central-1:219608582189:*\"\n        }\n      }\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["kms:*"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["arn:aws:iam::219608582189:root"],"type":"AWS"}],"resources":["arn:aws:kms:eu-central-1:219608582189:*"],"sid":"Enable IAM User Permissions"},{"actions":["kms:Decrypt*","kms:Describe*","kms:Encrypt*","kms:GenerateDataKey*","kms:ReEncrypt*"],"condition":[{"test":"ArnLike","values":["arn:aws:logs:eu-central-1:219608582189:*"],"variable":"kms:EncryptionContext:aws:logs:arn"}],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["logs.eu-central-1.amazonaws.com"],"type":"Service"}],"resources":["arn:aws:kms:eu-central-1:219608582189:*"],"sid":"Enable KMS to be used by CloudWatch Logs"}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[false]},{"actions":[false,false,false,false,false],"condition":[{"values":[false]}],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[false]}]}},{"address":"module.iam_kms.data.aws_iam_policy_document.policy_role_document","mode":"data","type":"aws_iam_policy_document","name":"policy_role_document","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"3059265968","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"1\",\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Principal\": {\n        \"Service\": \"vpc-flow-logs.amazonaws.com\"\n      }\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["sts:AssumeRole"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":["vpc-flow-logs.amazonaws.com"],"type":"Service"}],"resources":[],"sid":"1"}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[{"identifiers":[false]}],"resources":[]}]}},{"address":"module.iam_kms.data.aws_iam_policy_document.policy_rolepolicy_document","mode":"data","type":"aws_iam_policy_document","name":"policy_rolepolicy_document","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"3108181240","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"2\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:DescribeLogStreams\",\n        \"logs:DescribeLogGroup\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"arn:aws:logs:eu-central-1:219608582189:*\"\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["logs:CreateLogGroup","logs:CreateLogStream","logs:DescribeLogGroup","logs:DescribeLogStreams","logs:PutLogEvents"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["arn:aws:logs:eu-central-1:219608582189:*"],"sid":"2"}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false,false,false,false,false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":[false]}]}}],"address":"module.iam_kms"},{"resources":[{"address":"module.vpcs[\"spoke-vpc-a\"].data.aws_availability_zones.current","mode":"data","type":"aws_availability_zones","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"all_availability_zones":null,"exclude_names":null,"exclude_zone_ids":null,"filter":null,"group_names":["eu-central-1-zg-1"],"id":"eu-central-1","names":["eu-central-1a","eu-central-1b","eu-central-1c"],"state":null,"zone_ids":["euc1-az2","euc1-az3","euc1-az1"]},"sensitive_values":{"group_names":[false],"names":[false,false,false],"zone_ids":[false,false,false]}}],"address":"module.vpcs[\"spoke-vpc-a\"]","child_modules":[{"address":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0]","child_modules":[{"resources":[{"address":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0].data.aws_iam_policy_document.main","mode":"data","type":"aws_iam_policy_document","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"3337962981","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"SpokeVpcALogsToCW\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:DescribeLogStreams\",\n        \"logs:DescribeLogGroups\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["logs:CreateLogGroup","logs:CreateLogStream","logs:DescribeLogGroups","logs:DescribeLogStreams","logs:PutLogEvents"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":"SpokeVpcALogsToCW"}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false,false,false,false,false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":[false]}]}}],"address":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0]"}]}]},{"resources":[{"address":"module.vpcs[\"spoke-vpc-b\"].data.aws_availability_zones.current","mode":"data","type":"aws_availability_zones","name":"current","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"all_availability_zones":null,"exclude_names":null,"exclude_zone_ids":null,"filter":null,"group_names":["eu-central-1-zg-1"],"id":"eu-central-1","names":["eu-central-1a","eu-central-1b","eu-central-1c"],"state":null,"zone_ids":["euc1-az2","euc1-az3","euc1-az1"]},"sensitive_values":{"group_names":[false],"names":[false,false,false],"zone_ids":[false,false,false]}}],"address":"module.vpcs[\"spoke-vpc-b\"]","child_modules":[{"address":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0]","child_modules":[{"resources":[{"address":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0].data.aws_iam_policy_document.main","mode":"data","type":"aws_iam_policy_document","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"id":"3531423038","json":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Sid\": \"SpokeVpcBLogsToCW\",\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"logs:PutLogEvents\",\n        \"logs:DescribeLogStreams\",\n        \"logs:DescribeLogGroups\",\n        \"logs:CreateLogStream\",\n        \"logs:CreateLogGroup\"\n      ],\n      \"Resource\": \"*\"\n    }\n  ]\n}","override_json":null,"override_policy_documents":null,"policy_id":null,"source_json":null,"source_policy_documents":null,"statement":[{"actions":["logs:CreateLogGroup","logs:CreateLogStream","logs:DescribeLogGroups","logs:DescribeLogStreams","logs:PutLogEvents"],"condition":[],"effect":"Allow","not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":["*"],"sid":"SpokeVpcBLogsToCW"}],"version":"2012-10-17"},"sensitive_values":{"statement":[{"actions":[false,false,false,false,false],"condition":[],"not_actions":[],"not_principals":[],"not_resources":[],"principals":[],"resources":[false]}]}}],"address":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0]"}]}]}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"4.20.0","expressions":{"region":{"references":["var.aws_region"]}}},"awscc":{"name":"awscc","full_name":"registry.terraform.io/hashicorp/awscc","version_constraint":"0.25.0","expressions":{"region":{"references":["var.aws_region"]}}}},"root_module":{"outputs":{"customer_gateway_id":{"expression":{"references":["aws_customer_gateway.cgw.id","aws_customer_gateway.cgw"]},"description":"Customer Gateway ID."},"dx_gateway_id":{"expression":{"references":["var.dxgw_id","aws_dx_gateway.dxgw[0].id","aws_dx_gateway.dxgw[0]","aws_dx_gateway.dxgw"]},"description":"AWS Direct Connect gateway ID (if created)."},"ec2_instances":{"expression":{"references":["module.compute"]},"description":"EC2 instances created."},"private_ip_vpn_id":{"expression":{"references":["aws_vpn_connection.private_ip_vpn.id","aws_vpn_connection.private_ip_vpn"]},"description":"AWS Site-to-Site Private IP VPN ID."},"ssm_endpoints":{"expression":{"references":["module.vpc_endpoints"]},"description":"SSM endpoints created."},"transit_gateway_id":{"expression":{"references":["aws_ec2_transit_gateway.tgw.id","aws_ec2_transit_gateway.tgw"]},"description":"Transit Gateway ID."},"vpcs":{"expression":{"references":["module.vpcs"]},"description":"VPC IDs created."}},"resources":[{"address":"aws_customer_gateway.cgw","mode":"managed","type":"aws_customer_gateway","name":"cgw","provider_config_key":"aws","expressions":{"bgp_asn":{"references":["var.asn_numbers.customer_side","var.asn_numbers"]},"ip_address":{"references":["var.customer_gateway_ip"]},"tags":{"references":["var.identifier"]},"type":{"constant_value":"ipsec.1"}},"schema_version":0},{"address":"aws_dx_gateway.dxgw","mode":"managed","type":"aws_dx_gateway","name":"dxgw","provider_config_key":"aws","expressions":{"amazon_side_asn":{"references":["var.asn_numbers.amazon_side_dxgw","var.asn_numbers"]},"name":{"references":["var.identifier"]}},"schema_version":0,"count_expression":{"references":["var.dxgw_id"]}},{"address":"aws_dx_gateway_association.dxgw_tgw_association","mode":"managed","type":"aws_dx_gateway_association","name":"dxgw_tgw_association","provider_config_key":"aws","expressions":{"allowed_prefixes":{"references":["var.dxgw_allowed_prefixes"]},"associated_gateway_id":{"references":["aws_ec2_transit_gateway.tgw.id","aws_ec2_transit_gateway.tgw"]},"dx_gateway_id":{"references":["local.dxgw_id"]}},"schema_version":1},{"address":"aws_ec2_transit_gateway.tgw","mode":"managed","type":"aws_ec2_transit_gateway","name":"tgw","provider_config_key":"aws","expressions":{"amazon_side_asn":{"references":["var.asn_numbers.amazon_side_tgw","var.asn_numbers"]},"default_route_table_association":{"constant_value":"disable"},"default_route_table_propagation":{"constant_value":"disable"},"description":{"references":["var.identifier"]},"tags":{"references":["var.identifier"]},"transit_gateway_cidr_blocks":{"references":["var.tgw_cidr_blocks"]}},"schema_version":0},{"address":"aws_ec2_transit_gateway_route_table.tgw_rt","mode":"managed","type":"aws_ec2_transit_gateway_route_table","name":"tgw_rt","provider_config_key":"aws","expressions":{"tags":{"references":["var.identifier"]},"transit_gateway_id":{"references":["aws_ec2_transit_gateway.tgw.id","aws_ec2_transit_gateway.tgw"]}},"schema_version":0},{"address":"aws_ec2_transit_gateway_route_table_association.spoke_tgw_association","mode":"managed","type":"aws_ec2_transit_gateway_route_table_association","name":"spoke_tgw_association","provider_config_key":"aws","expressions":{"transit_gateway_attachment_id":{"references":["each.value.transit_gateway_attachment_id","each.value"]},"transit_gateway_route_table_id":{"references":["aws_ec2_transit_gateway_route_table.tgw_rt.id","aws_ec2_transit_gateway_route_table.tgw_rt"]}},"schema_version":0,"for_each_expression":{"references":["module.vpcs"]}},{"address":"aws_ec2_transit_gateway_route_table_association.vpn_tgw_association","mode":"managed","type":"aws_ec2_transit_gateway_route_table_association","name":"vpn_tgw_association","provider_config_key":"aws","expressions":{"transit_gateway_attachment_id":{"references":["data.aws_ec2_transit_gateway_vpn_attachment.vpn_tgw_attachment.id","data.aws_ec2_transit_gateway_vpn_attachment.vpn_tgw_attachment"]},"transit_gateway_route_table_id":{"references":["aws_ec2_transit_gateway_route_table.tgw_rt.id","aws_ec2_transit_gateway_route_table.tgw_rt"]}},"schema_version":0},{"address":"aws_ec2_transit_gateway_route_table_propagation.spoke_tgw_propagation","mode":"managed","type":"aws_ec2_transit_gateway_route_table_propagation","name":"spoke_tgw_propagation","provider_config_key":"aws","expressions":{"transit_gateway_attachment_id":{"references":["each.value.transit_gateway_attachment_id","each.value"]},"transit_gateway_route_table_id":{"references":["aws_ec2_transit_gateway_route_table.tgw_rt.id","aws_ec2_transit_gateway_route_table.tgw_rt"]}},"schema_version":0,"for_each_expression":{"references":["module.vpcs"]}},{"address":"aws_ec2_transit_gateway_route_table_propagation.vpn_tgw_propagation","mode":"managed","type":"aws_ec2_transit_gateway_route_table_propagation","name":"vpn_tgw_propagation","provider_config_key":"aws","expressions":{"transit_gateway_attachment_id":{"references":["data.aws_ec2_transit_gateway_vpn_attachment.vpn_tgw_attachment.id","data.aws_ec2_transit_gateway_vpn_attachment.vpn_tgw_attachment"]},"transit_gateway_route_table_id":{"references":["aws_ec2_transit_gateway_route_table.tgw_rt.id","aws_ec2_transit_gateway_route_table.tgw_rt"]}},"schema_version":0},{"address":"aws_vpn_connection.private_ip_vpn","mode":"managed","type":"aws_vpn_connection","name":"private_ip_vpn","provider_config_key":"aws","expressions":{"customer_gateway_id":{"references":["aws_customer_gateway.cgw.id","aws_customer_gateway.cgw"]},"outside_ip_address_type":{"constant_value":"PrivateIpv4"},"tags":{"references":["var.identifier"]},"transit_gateway_id":{"references":["aws_ec2_transit_gateway.tgw.id","aws_ec2_transit_gateway.tgw"]},"transport_transit_gateway_attachment_id":{"references":["data.aws_ec2_transit_gateway_dx_gateway_attachment.tgw_dxgw_attachment.id","data.aws_ec2_transit_gateway_dx_gateway_attachment.tgw_dxgw_attachment"]},"type":{"constant_value":"ipsec.1"}},"schema_version":0},{"address":"data.aws_ec2_transit_gateway_dx_gateway_attachment.tgw_dxgw_attachment","mode":"data","type":"aws_ec2_transit_gateway_dx_gateway_attachment","name":"tgw_dxgw_attachment","provider_config_key":"aws","expressions":{"dx_gateway_id":{"references":["local.dxgw_id"]},"transit_gateway_id":{"references":["aws_ec2_transit_gateway.tgw.id","aws_ec2_transit_gateway.tgw"]}},"schema_version":0,"depends_on":["aws_dx_gateway_association.dxgw_tgw_association"]},{"address":"data.aws_ec2_transit_gateway_vpn_attachment.vpn_tgw_attachment","mode":"data","type":"aws_ec2_transit_gateway_vpn_attachment","name":"vpn_tgw_attachment","provider_config_key":"aws","expressions":{"transit_gateway_id":{"references":["aws_ec2_transit_gateway.tgw.id","aws_ec2_transit_gateway.tgw"]},"vpn_connection_id":{"references":["aws_vpn_connection.private_ip_vpn.id","aws_vpn_connection.private_ip_vpn"]}},"schema_version":0}],"module_calls":{"compute":{"source":"./modules/compute","expressions":{"ec2_iam_instance_profile":{"references":["module.iam_kms.ec2_iam_instance_profile","module.iam_kms"]},"ec2_security_group":{"references":["local.security_groups.instance","local.security_groups"]},"identifier":{"references":["var.identifier"]},"instance_type":{"references":["local.spoke_vpcs","each.key"]},"number_azs":{"references":["local.spoke_vpcs","each.key"]},"vpc_id":{"references":["each.value.vpc_attributes.id","each.value.vpc_attributes","each.value"]},"vpc_name":{"references":["each.key"]},"vpc_subnets":{"references":["each.value.private_subnet_attributes_by_az","each.value"]}},"for_each_expression":{"references":["module.vpcs"]},"module":{"outputs":{"instances_created":{"expression":{"references":["aws_instance.ec2_instance"]},"description":"List of instances created."}},"resources":[{"address":"aws_instance.ec2_instance","mode":"managed","type":"aws_instance","name":"ec2_instance","provider_config_key":"aws","expressions":{"ami":{"references":["data.aws_ami.amazon_linux.id","data.aws_ami.amazon_linux"]},"associate_public_ip_address":{"constant_value":false},"iam_instance_profile":{"references":["var.ec2_iam_instance_profile"]},"instance_type":{"references":["var.instance_type"]},"metadata_options":[{"http_endpoint":{"constant_value":"enabled"},"http_tokens":{"constant_value":"required"}}],"root_block_device":[{"encrypted":{"constant_value":true}}],"subnet_id":{"references":["var.vpc_subnets","count.index"]},"tags":{"references":["var.vpc_name","count.index","var.identifier"]},"vpc_security_group_ids":{"references":["aws_security_group.spoke_vpc_sg.id","aws_security_group.spoke_vpc_sg"]}},"schema_version":1,"count_expression":{"references":["var.number_azs"]}},{"address":"aws_security_group.spoke_vpc_sg","mode":"managed","type":"aws_security_group","name":"spoke_vpc_sg","provider_config_key":"aws","expressions":{"description":{"references":["var.ec2_security_group.description","var.ec2_security_group"]},"name":{"references":["var.ec2_security_group.name","var.ec2_security_group"]},"tags":{"references":["var.vpc_name","var.identifier"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1},{"address":"data.aws_ami.amazon_linux","mode":"data","type":"aws_ami","name":"amazon_linux","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"name"},"values":{"constant_value":["amzn2-ami-hvm-*-x86_64-gp2"]}},{"name":{"constant_value":"owner-alias"},"values":{"constant_value":["amazon"]}}],"most_recent":{"constant_value":true},"owners":{"constant_value":["amazon"]}},"schema_version":0}],"variables":{"ec2_iam_instance_profile":{"description":"EC2 instance profile to attach to the EC2 instance(s)"},"ec2_security_group":{"description":"Information about the Security Groups to create."},"identifier":{"description":"Project identifier."},"instance_type":{"description":"EC2 instance type."},"number_azs":{"description":"Number of AZs to place instances."},"vpc_id":{"description":"VPC ID to create the instances."},"vpc_name":{"description":"Name of the VPC where the EC2 instance(s) are created."},"vpc_subnets":{"description":"Subnets in the VPC to create the instances."}}}},"iam_kms":{"source":"./modules/iam_kms","expressions":{"aws_region":{"references":["var.aws_region"]},"identifier":{"references":["var.identifier"]}},"module":{"outputs":{"ec2_iam_instance_profile":{"expression":{"references":["aws_iam_instance_profile.ec2_instance_profile.id","aws_iam_instance_profile.ec2_instance_profile"]},"description":"EC2 instance profile to use in the EC2 instace(s) to create."},"kms_arn":{"expression":{"references":["aws_kms_key.log_key.arn","aws_kms_key.log_key"]},"description":"ARN of the KMS key created."},"vpc_flowlog_role":{"expression":{"references":["aws_iam_role.vpc_flowlogs_role.arn","aws_iam_role.vpc_flowlogs_role"]},"description":"ARN of the role to use in the VPC Flow Logs to create."}},"resources":[{"address":"aws_iam_instance_profile.ec2_instance_profile","mode":"managed","type":"aws_iam_instance_profile","name":"ec2_instance_profile","provider_config_key":"aws","expressions":{"name":{"references":["var.identifier"]},"role":{"references":["aws_iam_role.role_ec2.id","aws_iam_role.role_ec2"]}},"schema_version":0},{"address":"aws_iam_policy_attachment.s3_readonly_policy_attachment","mode":"managed","type":"aws_iam_policy_attachment","name":"s3_readonly_policy_attachment","provider_config_key":"aws","expressions":{"name":{"references":["var.identifier"]},"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonS3ReadOnlyAccess"},"roles":{"references":["aws_iam_role.role_ec2.id","aws_iam_role.role_ec2"]}},"schema_version":0},{"address":"aws_iam_policy_attachment.ssm_iam_role_policy_attachment","mode":"managed","type":"aws_iam_policy_attachment","name":"ssm_iam_role_policy_attachment","provider_config_key":"aws","expressions":{"name":{"references":["var.identifier"]},"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore"},"roles":{"references":["aws_iam_role.role_ec2.id","aws_iam_role.role_ec2"]}},"schema_version":0},{"address":"aws_iam_policy_attachment.ssm_iam_service_role_attachment","mode":"managed","type":"aws_iam_policy_attachment","name":"ssm_iam_service_role_attachment","provider_config_key":"aws","expressions":{"name":{"references":["var.identifier"]},"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AmazonEC2RoleforSSM"},"roles":{"references":["aws_iam_role.role_ec2.id","aws_iam_role.role_ec2"]}},"schema_version":0},{"address":"aws_iam_role.role_ec2","mode":"managed","type":"aws_iam_role","name":"role_ec2","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.policy_document.json","data.aws_iam_policy_document.policy_document"]},"name":{"references":["var.identifier"]},"path":{"constant_value":"/"}},"schema_version":0},{"address":"aws_iam_role.vpc_flowlogs_role","mode":"managed","type":"aws_iam_role","name":"vpc_flowlogs_role","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["data.aws_iam_policy_document.policy_role_document.json","data.aws_iam_policy_document.policy_role_document"]},"name":{"references":["var.identifier"]}},"schema_version":0},{"address":"aws_iam_role_policy.vpc_flowlogs_role_policy","mode":"managed","type":"aws_iam_role_policy","name":"vpc_flowlogs_role_policy","provider_config_key":"aws","expressions":{"name":{"references":["var.identifier"]},"policy":{"references":["data.aws_iam_policy_document.policy_rolepolicy_document.json","data.aws_iam_policy_document.policy_rolepolicy_document"]},"role":{"references":["aws_iam_role.vpc_flowlogs_role.id","aws_iam_role.vpc_flowlogs_role"]}},"schema_version":0},{"address":"aws_kms_key.log_key","mode":"managed","type":"aws_kms_key","name":"log_key","provider_config_key":"aws","expressions":{"deletion_window_in_days":{"constant_value":7},"description":{"constant_value":"KMS Logs Key"},"enable_key_rotation":{"constant_value":true},"policy":{"references":["data.aws_iam_policy_document.policy_kms_logs_document.json","data.aws_iam_policy_document.policy_kms_logs_document"]},"tags":{"references":["var.identifier"]}},"schema_version":0},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_iam_policy_document.policy_document","mode":"data","type":"aws_iam_policy_document","name":"policy_document","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"constant_value":["ec2.amazonaws.com"]},"type":{"constant_value":"Service"}}],"sid":{"constant_value":"1"}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.policy_kms_logs_document","mode":"data","type":"aws_iam_policy_document","name":"policy_kms_logs_document","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["kms:*"]},"principals":[{"identifiers":{"references":["data.aws_caller_identity.current.account_id","data.aws_caller_identity.current"]},"type":{"constant_value":"AWS"}}],"resources":{"references":["var.aws_region","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current"]},"sid":{"constant_value":"Enable IAM User Permissions"}},{"actions":{"constant_value":["kms:Encrypt*","kms:Decrypt*","kms:ReEncrypt*","kms:GenerateDataKey*","kms:Describe*"]},"condition":[{"test":{"constant_value":"ArnLike"},"values":{"references":["var.aws_region","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current"]},"variable":{"constant_value":"kms:EncryptionContext:aws:logs:arn"}}],"principals":[{"identifiers":{"references":["var.aws_region"]},"type":{"constant_value":"Service"}}],"resources":{"references":["var.aws_region","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current"]},"sid":{"constant_value":"Enable KMS to be used by CloudWatch Logs"}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.policy_role_document","mode":"data","type":"aws_iam_policy_document","name":"policy_role_document","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["sts:AssumeRole"]},"principals":[{"identifiers":{"constant_value":["vpc-flow-logs.amazonaws.com"]},"type":{"constant_value":"Service"}}],"sid":{"constant_value":"1"}}]},"schema_version":0},{"address":"data.aws_iam_policy_document.policy_rolepolicy_document","mode":"data","type":"aws_iam_policy_document","name":"policy_rolepolicy_document","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["logs:CreateLogGroup","logs:CreateLogStream","logs:PutLogEvents","logs:DescribeLogGroup","logs:DescribeLogStreams"]},"resources":{"references":["var.aws_region","data.aws_caller_identity.current.account_id","data.aws_caller_identity.current"]},"sid":{"constant_value":"2"}}]},"schema_version":0}],"variables":{"aws_region":{"description":"AWS Region indicated in the variables - where the resources are created."},"identifier":{"description":"Project identifier."}}}},"pricing":{"source":"terraform-aws-modules/pricing/aws","module":{},"version_constraint":"2.0.3"},"vpc_endpoints":{"source":"./modules/vpc_endpoints","expressions":{"endpoints_security_group":{"references":["local.security_groups.endpoints","local.security_groups"]},"endpoints_service_names":{"references":["local.endpoint_service_names"]},"identifier":{"references":["var.identifier"]},"vpc_id":{"references":["each.value.vpc_attributes.id","each.value.vpc_attributes","each.value"]},"vpc_name":{"references":["each.key"]},"vpc_subnets":{"references":["each.value.private_subnet_attributes_by_az","each.value"]}},"for_each_expression":{"references":["module.vpcs"]},"module":{"outputs":{"endpoint_dns":{"expression":{"references":["aws_vpc_endpoint.endpoint"]},"description":"DNS information about the VPC endpoints created."},"endpoints":{"expression":{"references":["aws_vpc_endpoint.endpoint"]},"description":"VPC Endpoints DNS information."}},"resources":[{"address":"aws_security_group.endpoints_vpc_sg","mode":"managed","type":"aws_security_group","name":"endpoints_vpc_sg","provider_config_key":"aws","expressions":{"description":{"references":["var.endpoints_security_group.description","var.endpoints_security_group"]},"name":{"references":["var.endpoints_security_group.name","var.endpoints_security_group"]},"tags":{"references":["var.vpc_name","var.identifier"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1},{"address":"aws_vpc_endpoint.endpoint","mode":"managed","type":"aws_vpc_endpoint","name":"endpoint","provider_config_key":"aws","expressions":{"private_dns_enabled":{"references":["each.value.private_dns","each.value"]},"security_group_ids":{"references":["aws_security_group.endpoints_vpc_sg.id","aws_security_group.endpoints_vpc_sg"]},"service_name":{"references":["each.value.name","each.value"]},"subnet_ids":{"references":["var.vpc_subnets"]},"vpc_endpoint_type":{"references":["each.value.type","each.value"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":0,"for_each_expression":{"references":["var.endpoints_service_names"]}}],"variables":{"endpoints_security_group":{"description":"Information about the Security Groups to create - for the VPC endpoints."},"endpoints_service_names":{"description":"Information about the VPC endpoints to create."},"identifier":{"description":"Project identifier."},"vpc_id":{"description":"ID of the VPC to create the endpoint(s)."},"vpc_name":{"description":"Name of the VPC where the VPC endpoints are created."},"vpc_subnets":{"description":"List of the subnets to place the endpoint(s)."}}}},"vpcs":{"source":"aws-ia/vpc/aws","expressions":{"az_count":{"references":["each.value.number_azs","each.value"]},"cidr_block":{"references":["each.value.cidr_block","each.value"]},"name":{"references":["each.key"]},"subnets":{"references":["each.value.private_subnets","each.value","each.value.number_azs","each.value","each.value.tgw_subnets","each.value","each.value.number_azs","each.value","aws_ec2_transit_gateway.tgw.id","aws_ec2_transit_gateway.tgw"]},"vpc_flow_logs":{"references":["each.value.flow_log_config.log_destination_type","each.value.flow_log_config","each.value","each.value.flow_log_config.retention_in_days","each.value.flow_log_config","each.value","module.iam_kms.vpc_flowlog_role","module.iam_kms","module.iam_kms.kms_arn","module.iam_kms"]}},"for_each_expression":{"references":["local.spoke_vpcs"]},"module":{"outputs":{"nat_gateway_attributes_by_az":{"expression":{"references":["aws_nat_gateway.main"]},"description":"Map of nat gateway resource attributes by AZ.\n\nExample:\n```\nnat_gateway_attributes_by_az = {\n  \"us-east-1a\" = {\n    \"allocation_id\" = \"eipalloc-0e8b20303eea88b13\"\n    \"connectivity_type\" = \"public\"\n    \"id\" = \"nat-0fde39f9550f4abb5\"\n    \"network_interface_id\" = \"eni-0d422727088bf9a86\"\n    \"private_ip\" = \"10.0.3.40\"\n    \"public_ip\" = \u003c\u003e\n    \"subnet_id\" = \"subnet-0f11c92e439c8ab4a\"\n    \"tags\" = tomap({\n      \"Name\" = \"nat-my-public-us-east-1a\"\n    })\n    \"tags_all\" = tomap({\n      \"Name\" = \"nat-my-public-us-east-1a\"\n    })\n  }\n  \"us-east-1b\" = { ... }\n}\n```\n"},"nat_gateways_by_az":{"expression":{"references":["aws_nat_gateway.main"]},"description":"DEPRECATED OUTPUT: this output has been renamed to `nat_gateway_attributes_by_az`. Please transition to that output and see it for a proper description."},"private_subnet_attributes_by_az":{"expression":{"references":["aws_subnet.private"]},"description":"Map of all private subnets containing their attributes.\n\nExample:\n```\nprivate_subnet_attributes = {\n  \"us-east-1a\" = {\n    \"arn\" = \"arn:aws:ec2:us-east-1:\u003c\u003e:subnet/subnet-04a86315c4839b519\"\n    \"assign_ipv6_address_on_creation\" = false\n    ...\n    \u003call attributes of subnet: https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/subnet#attributes-reference\u003e\n  }\n  \"us-east-1b\" = {...)\n}\n```\n"},"public_subnet_attributes_by_az":{"expression":{"references":["aws_subnet.public"]},"description":"Map of all public subnets containing their attributes.\n\nExample:\n```\npublic_subnet_attributes = {\n  \"us-east-1a\" = {\n    \"arn\" = \"arn:aws:ec2:us-east-1:\u003c\u003e:subnet/subnet-04a86315c4839b519\"\n    \"assign_ipv6_address_on_creation\" = false\n    ...\n    \u003call attributes of subnet: https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/subnet#attributes-reference\u003e\n  }\n  \"us-east-1b\" = {...)\n}\n```\n"},"route_table_attributes_by_type_by_az":{"expression":{"references":["awscc_ec2_route_table.private","awscc_ec2_route_table.public","awscc_ec2_route_table.tgw"]},"description":"Map of route tables by type =\u003e az =\u003e route table attributes. Example usage: module.vpc.route_table_by_subnet_type.private.id\n\nExample:\n```\nroute_table_attributes_by_type_by_az = {\n  \"private\" = {\n    \"us-east-1a\" = {\n      \"id\" = \"rtb-0e77040c0598df003\"\n      \"route_table_id\" = \"rtb-0e77040c0598df003\"\n      \"tags\" = tolist([\n        {\n          \"key\" = \"Name\"\n          \"value\" = \"private-us-east-1a\"\n        },\n      ])\n      \"vpc_id\" = \"vpc-033e054f49409592a\"\n    }\n    \"us-east-1b\" = { ... }\n  \"public\" = { ... }\n```\n"},"route_table_by_subnet_type":{"expression":{"references":["awscc_ec2_route_table.private","awscc_ec2_route_table.public","awscc_ec2_route_table.tgw"]},"description":"DEPRECATED OUTPUT: this output has been renamed to `route_table_attributes_by_type_by_az`. Please transition to that output and see it for a proper description."},"subnet_cidrs_by_type_by_az":{"expression":{"references":["module.calculate_subnets.subnets_by_type","module.calculate_subnets"]},"description":"Map of subnets grouped by type with child map { az = cidr }.\n\nExample:\n```\n  subnets = {\n    private = {\n      us-east-1a = \"10.0.0.0/24\"\n      us-east-1b = \"10.0.1.0/24\"\n      us-east-1c = \"10.0.2.0/24\"\n    }\n    public  = {\n      us-east-1a = \"10.0.3.0/24\"\n      us-east-1b = \"10.0.4.0/24\"\n      us-east-1c = \"10.0.5.0/24\"\n    }\n  }\n```\n"},"subnets":{"expression":{"references":["module.calculate_subnets.subnets_by_type","module.calculate_subnets"]},"description":"DEPRECATED OUTPUT: this output has been renamed to `subnet_cidrs_by_type_by_az`. Please transition to that output and see it for a proper description."},"tgw_subnet_attributes_by_az":{"expression":{"references":["aws_subnet.tgw"]},"description":"Map of all tgw subnets containing their attributes.\n\nExample:\n```\ntgw_subnet_attributes = {\n  \"us-east-1a\" = {\n    \"arn\" = \"arn:aws:ec2:us-east-1:\u003c\u003e:subnet/subnet-04a86315c4839b519\"\n    \"assign_ipv6_address_on_creation\" = false\n    ...\n    \u003call attributes of subnet: https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/subnet#attributes-reference\u003e\n  }\n  \"us-east-1b\" = {...)\n}\n```\n"},"transit_gateway_attachment_id":{"expression":{"references":["aws_ec2_transit_gateway_vpc_attachment.tgw[0].id","aws_ec2_transit_gateway_vpc_attachment.tgw[0]","aws_ec2_transit_gateway_vpc_attachment.tgw"]},"description":"Transit gateway attachment id."},"vpc_attributes":{"expression":{"references":["local.vpc"]},"description":"VPC resource attributes. Full output of aws_vpc."}},"resources":[{"address":"aws_ec2_transit_gateway_route_table_association.tgw","mode":"managed","type":"aws_ec2_transit_gateway_route_table_association","name":"tgw","provider_config_key":"aws","expressions":{"transit_gateway_attachment_id":{"references":["aws_ec2_transit_gateway_vpc_attachment.tgw[0].id","aws_ec2_transit_gateway_vpc_attachment.tgw[0]","aws_ec2_transit_gateway_vpc_attachment.tgw"]},"transit_gateway_route_table_id":{"references":["var.subnets.transit_gateway.transit_gateway_route_table_id","var.subnets.transit_gateway","var.subnets"]}},"schema_version":0,"count_expression":{"references":["var.subnets.transit_gateway.transit_gateway_route_table_id","var.subnets.transit_gateway","var.subnets"]}},{"address":"aws_ec2_transit_gateway_vpc_attachment.tgw","mode":"managed","type":"aws_ec2_transit_gateway_vpc_attachment","name":"tgw","provider_config_key":"aws","expressions":{"appliance_mode_support":{"references":["var.subnets.transit_gateway.transit_gateway_appliance_mode_support","var.subnets.transit_gateway","var.subnets"]},"dns_support":{"references":["var.subnets.transit_gateway.transit_gateway_dns_support","var.subnets.transit_gateway","var.subnets"]},"subnet_ids":{"references":["aws_subnet.tgw"]},"transit_gateway_default_route_table_association":{"references":["var.subnets.transit_gateway.transit_gateway_default_route_table_association","var.subnets.transit_gateway","var.subnets"]},"transit_gateway_default_route_table_propagation":{"references":["var.subnets.transit_gateway.transit_gateway_default_route_table_propagation","var.subnets.transit_gateway","var.subnets"]},"transit_gateway_id":{"references":["var.subnets.transit_gateway.transit_gateway_id","var.subnets.transit_gateway","var.subnets"]},"vpc_id":{"references":["local.vpc.id","local.vpc"]}},"schema_version":0,"count_expression":{"references":["local.subnets"]}},{"address":"aws_eip.nat","mode":"managed","type":"aws_eip","name":"nat","provider_config_key":"aws","expressions":{"tags":{"references":["local.subnet_names[\"public\"]","local.subnet_names","each.key","module.tags.tags_aws","module.tags"]},"vpc":{"constant_value":true}},"schema_version":0,"for_each_expression":{"references":["local.nat_configuration"]}},{"address":"aws_internet_gateway.main","mode":"managed","type":"aws_internet_gateway","name":"main","provider_config_key":"aws","expressions":{"tags":{"references":["var.name","module.tags.tags_aws","module.tags"]},"vpc_id":{"references":["local.vpc.id","local.vpc"]}},"schema_version":0,"count_expression":{"references":["local.subnets"]}},{"address":"aws_nat_gateway.main","mode":"managed","type":"aws_nat_gateway","name":"main","provider_config_key":"aws","expressions":{"allocation_id":{"references":["aws_eip.nat","each.key"]},"subnet_id":{"references":["aws_subnet.public","each.key"]},"tags":{"references":["local.subnet_names[\"public\"]","local.subnet_names","each.key","module.tags.tags_aws","module.tags"]}},"schema_version":0,"for_each_expression":{"references":["local.nat_configuration"]},"depends_on":["aws_internet_gateway.main"]},{"address":"aws_route.private_to_nat","mode":"managed","type":"aws_route","name":"private_to_nat","provider_config_key":"aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"nat_gateway_id":{"references":["aws_nat_gateway.main","each.key","aws_nat_gateway.main","local.nat_configuration[0]","local.nat_configuration"]},"route_table_id":{"references":["awscc_ec2_route_table.private","each.key"]}},"schema_version":0,"for_each_expression":{"references":["var.subnets.private.route_to_nat","var.subnets.private","var.subnets","local.subnets.public","local.subnets"]}},{"address":"aws_route.private_to_tgw","mode":"managed","type":"aws_route","name":"private_to_tgw","provider_config_key":"aws","expressions":{"destination_cidr_block":{"references":["var.subnets.private.route_to_transit_gateway[0]","var.subnets.private.route_to_transit_gateway","var.subnets.private","var.subnets"]},"route_table_id":{"references":["awscc_ec2_route_table.private","each.key"]},"transit_gateway_id":{"references":["var.subnets.transit_gateway.transit_gateway_id","var.subnets.transit_gateway","var.subnets"]}},"schema_version":0,"for_each_expression":{"references":["var.subnets.private.route_to_transit_gateway","var.subnets.private","var.subnets","local.subnets.private","local.subnets","var.subnets.private.route_to_transit_gateway[0]","var.subnets.private.route_to_transit_gateway","var.subnets.private","var.subnets"]}},{"address":"aws_route.public_to_igw","mode":"managed","type":"aws_route","name":"public_to_igw","provider_config_key":"aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"gateway_id":{"references":["aws_internet_gateway.main[0].id","aws_internet_gateway.main[0]","aws_internet_gateway.main"]},"route_table_id":{"references":["awscc_ec2_route_table.public","each.key"]}},"schema_version":0,"for_each_expression":{"references":["local.subnets.public","local.subnets"]}},{"address":"aws_route.public_to_tgw","mode":"managed","type":"aws_route","name":"public_to_tgw","provider_config_key":"aws","expressions":{"destination_cidr_block":{"references":["var.subnets.public.route_to_transit_gateway[0]","var.subnets.public.route_to_transit_gateway","var.subnets.public","var.subnets"]},"route_table_id":{"references":["awscc_ec2_route_table.public","each.key"]},"transit_gateway_id":{"references":["var.subnets.transit_gateway.transit_gateway_id","var.subnets.transit_gateway","var.subnets"]}},"schema_version":0,"for_each_expression":{"references":["var.subnets.public.route_to_transit_gateway","var.subnets.public","var.subnets","local.subnets.public","local.subnets","var.subnets.public.route_to_transit_gateway[0]","var.subnets.public.route_to_transit_gateway","var.subnets.public","var.subnets"]}},{"address":"aws_route.tgw_to_nat","mode":"managed","type":"aws_route","name":"tgw_to_nat","provider_config_key":"aws","expressions":{"destination_cidr_block":{"constant_value":"0.0.0.0/0"},"nat_gateway_id":{"references":["aws_nat_gateway.main","each.key","aws_nat_gateway.main","local.nat_configuration[0]","local.nat_configuration"]},"route_table_id":{"references":["awscc_ec2_route_table.tgw","each.key"]}},"schema_version":0,"for_each_expression":{"references":["var.subnets.transit_gateway.route_to_nat","var.subnets.transit_gateway","var.subnets","local.subnets.public","local.subnets"]}},{"address":"aws_subnet.private","mode":"managed","type":"aws_subnet","name":"private","provider_config_key":"aws","expressions":{"availability_zone":{"references":["each.key"]},"cidr_block":{"references":["each.value"]},"map_public_ip_on_launch":{"constant_value":false},"tags":{"references":["local.subnet_names[\"private\"]","local.subnet_names","each.key","module.tags.tags_aws","module.tags"]},"vpc_id":{"references":["local.vpc.id","local.vpc"]}},"schema_version":1,"for_each_expression":{"references":["local.subnets.private","local.subnets"]},"depends_on":["aws_vpc_ipv4_cidr_block_association.secondary"]},{"address":"aws_subnet.public","mode":"managed","type":"aws_subnet","name":"public","provider_config_key":"aws","expressions":{"availability_zone":{"references":["each.key"]},"cidr_block":{"references":["each.value"]},"tags":{"references":["local.subnet_names[\"public\"]","local.subnet_names","each.key","module.tags.tags_aws","module.tags"]},"vpc_id":{"references":["local.vpc.id","local.vpc"]}},"schema_version":1,"for_each_expression":{"references":["local.subnets.public","local.subnets"]}},{"address":"aws_subnet.tgw","mode":"managed","type":"aws_subnet","name":"tgw","provider_config_key":"aws","expressions":{"availability_zone":{"references":["each.key"]},"cidr_block":{"references":["each.value"]},"tags":{"references":["local.subnet_names[\"transit_gateway\"]","local.subnet_names","each.key","module.tags.tags_aws","module.tags"]},"vpc_id":{"references":["local.vpc.id","local.vpc"]}},"schema_version":1,"for_each_expression":{"references":["local.subnets.transit_gateway","local.subnets"]}},{"address":"aws_vpc.main","mode":"managed","type":"aws_vpc","name":"main","provider_config_key":"aws","expressions":{"cidr_block":{"references":["local.cidr_block"]},"enable_dns_hostnames":{"references":["var.vpc_enable_dns_hostnames"]},"enable_dns_support":{"references":["var.vpc_enable_dns_support"]},"instance_tenancy":{"references":["var.vpc_instance_tenancy"]},"ipv4_ipam_pool_id":{"references":["var.vpc_ipv4_ipam_pool_id"]},"tags":{"references":["var.name","module.tags.tags_aws","module.tags"]}},"schema_version":1,"count_expression":{"references":["local.create_vpc"]}},{"address":"aws_vpc_ipv4_cidr_block_association.secondary","mode":"managed","type":"aws_vpc_ipv4_cidr_block_association","name":"secondary","provider_config_key":"aws","expressions":{"cidr_block":{"references":["local.cidr_block"]},"ipv4_ipam_pool_id":{"references":["var.vpc_ipv4_ipam_pool_id"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":0,"count_expression":{"references":["var.vpc_secondary_cidr","local.create_vpc"]}},{"address":"awscc_ec2_route_table.private","mode":"managed","type":"awscc_ec2_route_table","name":"private","provider_config_key":"awscc","expressions":{"tags":{"references":["local.subnet_names[\"private\"]","local.subnet_names","each.key","module.tags.tags","module.tags"]},"vpc_id":{"references":["local.vpc.id","local.vpc"]}},"schema_version":1,"for_each_expression":{"references":["local.subnets.private","local.subnets"]}},{"address":"awscc_ec2_route_table.public","mode":"managed","type":"awscc_ec2_route_table","name":"public","provider_config_key":"awscc","expressions":{"tags":{"references":["local.subnet_names[\"public\"]","local.subnet_names","each.key","module.tags.tags","module.tags"]},"vpc_id":{"references":["local.vpc.id","local.vpc"]}},"schema_version":1,"for_each_expression":{"references":["local.subnets.public","local.subnets"]}},{"address":"awscc_ec2_route_table.tgw","mode":"managed","type":"awscc_ec2_route_table","name":"tgw","provider_config_key":"awscc","expressions":{"tags":{"references":["local.subnet_names[\"transit_gateway\"]","local.subnet_names","each.key","module.tags.tags","module.tags"]},"vpc_id":{"references":["local.vpc.id","local.vpc"]}},"schema_version":1,"for_each_expression":{"references":["local.subnets.transit_gateway","local.subnets"]}},{"address":"awscc_ec2_subnet_route_table_association.private","mode":"managed","type":"awscc_ec2_subnet_route_table_association","name":"private","provider_config_key":"awscc","expressions":{"route_table_id":{"references":["awscc_ec2_route_table.private","each.key"]},"subnet_id":{"references":["aws_subnet.private","each.key"]}},"schema_version":1,"for_each_expression":{"references":["local.subnets.private","local.subnets"]}},{"address":"awscc_ec2_subnet_route_table_association.public","mode":"managed","type":"awscc_ec2_subnet_route_table_association","name":"public","provider_config_key":"awscc","expressions":{"route_table_id":{"references":["awscc_ec2_route_table.public","each.key"]},"subnet_id":{"references":["aws_subnet.public","each.key"]}},"schema_version":1,"for_each_expression":{"references":["local.subnets.public","local.subnets"]}},{"address":"awscc_ec2_subnet_route_table_association.tgw","mode":"managed","type":"awscc_ec2_subnet_route_table_association","name":"tgw","provider_config_key":"awscc","expressions":{"route_table_id":{"references":["awscc_ec2_route_table.tgw","each.key"]},"subnet_id":{"references":["aws_subnet.tgw","each.key"]}},"schema_version":1,"for_each_expression":{"references":["local.subnets.transit_gateway","local.subnets"]}},{"address":"data.aws_availability_zones.current","mode":"data","type":"aws_availability_zones","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_vpc_ipam_preview_next_cidr.main","mode":"data","type":"aws_vpc_ipam_preview_next_cidr","name":"main","provider_config_key":"aws","expressions":{"ipam_pool_id":{"references":["var.vpc_ipv4_ipam_pool_id"]},"netmask_length":{"references":["var.vpc_ipv4_netmask_length"]}},"schema_version":0,"count_expression":{"references":["var.vpc_ipv4_ipam_pool_id"]}},{"address":"data.awscc_ec2_vpc.main","mode":"data","type":"awscc_ec2_vpc","name":"main","provider_config_key":"awscc","expressions":{"id":{"references":["var.vpc_id"]}},"schema_version":0,"count_expression":{"references":["local.create_vpc"]}}],"module_calls":{"calculate_subnets":{"source":"./modules/calculate_subnets","expressions":{"azs":{"references":["local.azs"]},"cidr":{"references":["local.cidr_block"]},"subnets":{"references":["var.subnets"]}},"module":{"outputs":{"subnets_by_type":{"expression":{"references":["local.explict_cidrs_grouped","module.subnet_calculator[0].grouped_by_separator","module.subnet_calculator[0]"]},"description":"Outputs subnets prefixes by type (private, public). Derived from split(var.separator, \u003csubnet_name\u003e)."}},"module_calls":{"subnet_calculator":{"source":"drewmullen/subnets/cidr","expressions":{"base_cidr_block":{"references":["var.cidr"]},"networks":{"references":["local.calculated_subnet_objects"]}},"count_expression":{"references":["local.types_to_calculate"]},"module":{"outputs":{"base_cidr_block":{"expression":{"references":["var.base_cidr_block"]},"description":"Echoes back the base_cidr_block input variable value, for convenience if passing the result of this module elsewhere as an object."},"grouped_by_separator":{"expression":{"references":["local.name_prefixes","local.addrs_by_name","var.separator","var.separator"]}},"network_cidr_blocks":{"expression":{"references":["local.addrs_by_name"]},"description":"A map from network names to allocated address prefixes in CIDR notation."},"networks":{"expression":{"references":["local.network_objs"]},"description":"A list of objects corresponding to each of the objects in the input variable 'networks', each extended with a new attribute 'cidr_block' giving the network's allocated address prefix."}},"variables":{"base_cidr_block":{"description":"A network address prefix in CIDR notation that all of the requested subnetwork prefixes will be allocated within."},"networks":{"description":"A list of objects describing requested subnetwork prefixes. netmask is the requested subnetwork cidr to slice from base_cidr_block"},"separator":{"default":"/","description":"Used to provide an output of grouped subnets based on a split()[0]."}}},"version_constraint":"1.0.2"}},"variables":{"azs":{"description":"List of AZs to build. AZ is appened to each IP address prefix name."},"cidr":{"description":"CIDR value to use as base for calculating IP address prefixes."},"subnets":{"description":"Defition of subnets to be built. If `netmask` is passed will calculate CIDR. Else `cidrs` list is ziped to var.azs and merged into final output to be built into aws_subnet(s)."}}}},"flow_logs":{"source":"./modules/flow_logs","expressions":{"flow_log_defintion":{"references":["local.flow_logs_definition"]},"name":{"references":["var.name"]},"tags":{"references":["module.tags.tags_aws","module.tags"]},"vpc_id":{"references":["local.vpc.id","local.vpc"]}},"count_expression":{"references":["local.create_flow_logs"]},"module":{"outputs":{"flow_log":{"expression":{"references":["aws_flow_log.main"]},"description":"Flow Log information."}},"resources":[{"address":"aws_flow_log.main","mode":"managed","type":"aws_flow_log","name":"main","provider_config_key":"aws","expressions":{"iam_role_arn":{"references":["local.iam_role_arn"]},"log_destination":{"references":["local.log_destination"]},"log_destination_type":{"references":["var.flow_log_defintion.log_destination_type","var.flow_log_defintion"]},"tags":{"references":["var.name","var.tags"]},"traffic_type":{"references":["var.flow_log_defintion.traffic_type","var.flow_log_defintion"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":0}],"module_calls":{"cloudwatch_log_group":{"source":"aws-ia/cloudwatch-log-group/aws","expressions":{"aws_service_principal":{"constant_value":"vpc-flow-logs.amazonaws.com"},"kms_key_id":{"references":["var.flow_log_defintion.kms_key_id","var.flow_log_defintion"]},"name":{"references":["var.name"]},"retention_in_days":{"references":["var.flow_log_defintion.retention_in_days","var.flow_log_defintion"]},"tags":{"references":["var.tags"]}},"count_expression":{"references":["local.create_flow_log_destination","var.flow_log_defintion.log_destination_type","var.flow_log_defintion"]},"module":{"outputs":{"iam_role":{"expression":{"references":["aws_iam_role.main"]},"description":"IAM role for cloudwatch log group."},"log_group":{"expression":{"references":["aws_cloudwatch_log_group.main"]},"description":"Log group resource output."},"sid_service_id":{"expression":{"references":["local.sid_service_id"]},"description":"The service being targetted"}},"resources":[{"address":"aws_cloudwatch_log_group.main","mode":"managed","type":"aws_cloudwatch_log_group","name":"main","provider_config_key":"aws","expressions":{"kms_key_id":{"references":["var.kms_key_id"]},"name_prefix":{"references":["var.name","local.service_id"]},"retention_in_days":{"references":["var.retention_in_days"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_iam_policy.main","mode":"managed","type":"aws_iam_policy","name":"main","provider_config_key":"aws","expressions":{"description":{"references":["var.name","local.service_id"]},"name_prefix":{"references":["var.name"]},"policy":{"references":["data.aws_iam_policy_document.main.json","data.aws_iam_policy_document.main"]}},"schema_version":0},{"address":"aws_iam_role.main","mode":"managed","type":"aws_iam_role","name":"main","provider_config_key":"aws","expressions":{"assume_role_policy":{"references":["local.sid_name","local.sid_service_id","var.aws_service_principal"]},"description":{"references":["var.name","local.service_id"]},"name_prefix":{"references":["var.name"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.main","mode":"managed","type":"aws_iam_role_policy_attachment","name":"main","provider_config_key":"aws","expressions":{"policy_arn":{"references":["aws_iam_policy.main.arn","aws_iam_policy.main"]},"role":{"references":["aws_iam_role.main.name","aws_iam_role.main"]}},"schema_version":0},{"address":"data.aws_iam_policy_document.main","mode":"data","type":"aws_iam_policy_document","name":"main","provider_config_key":"aws","expressions":{"statement":[{"actions":{"constant_value":["logs:CreateLogGroup","logs:CreateLogStream","logs:DescribeLogGroups","logs:DescribeLogStreams","logs:PutLogEvents"]},"effect":{"constant_value":"Allow"},"resources":{"constant_value":["*"]},"sid":{"references":["local.sid_name"]}}]},"schema_version":0}],"variables":{"aws_service_principal":{"description":"The name of the service being logged. 'Service Principal' is a special AWS identity that represents a service or other component with an easily understood name. You can find a list of AWS Service Principals at https://gist.github.com/shortjared/4c1e3fe52bdfa47522cfe5b41e5d6f22"},"kms_key_id":{"description":"Encryption for KMS key."},"name":{"description":"Name of logs and supporting resources."},"retention_in_days":{"default":0,"description":"Specifies the number of days you want to retain log events in the specified log group. Possible values are: 1, 3, 5, 7, 14, 30, 60, 90, 120, 150, 180, 365, 400, 545, 731, 1827, 3653, and 0. If you select 0, the events in the log group are always retained and never expire."},"tags":{"default":null,"description":"tags to be added to sub resources"}}},"version_constraint":"1.0.0"}},"variables":{"flow_log_defintion":{"description":"Definition of the Flow Logs (FL) to create. Can define pre-existing log_destination / iam_role_arn or theyll be created, default is Cloud Watch."},"name":{"description":"Name to give the VPC Flow Logs and optional resources."},"tags":{"default":null,"description":"Tags."},"vpc_id":{"description":"VPC ID to create flow logs for."}}}},"tags":{"source":"aws-ia/label/aws","expressions":{"tags":{"references":["var.tags"]}},"module":{"outputs":{"account":{"expression":{"references":["local.vars[\"account\"]","local.vars"]},"description":"Account of workload."},"env":{"expression":{"references":["local.vars[\"env\"]","local.vars"]},"description":"Environment of workload."},"id":{"expression":{"references":["local.ordered_id"]},"description":"Output of computed id based on inputs to module."},"name":{"expression":{"references":["local.vars[\"name\"]","local.vars"]},"description":"Name of workload."},"namespace":{"expression":{"references":["local.vars[\"namespace\"]","local.vars"]},"description":"Namespace of workload."},"tags":{"expression":{"references":["local.tags"]},"description":"Output of tags in awscc provider format."},"tags_aws":{"expression":{"references":["local.tags_aws"]},"description":"Output of tags in aws provider format."}},"variables":{"account":{"default":null,"description":"account, which could be AWS Account Name or Number"},"attributes":{"default":[],"description":"attributes, which could be used for additional attributes."},"delimiter":{"default":"-","description":"delimiter, which could be used between name, namespace and env."},"env":{"default":null,"description":"environment, e.g. 'sit', 'uat', 'prod' etc"},"id_order":{"default":["namespace","account","env","name"],"description":"The order in which the `id` is constructed. Default yields `namespace-account-env-name` if your var.delimiter is `-`. Variables that are not populated but order is preserved. Eg: If no `var.namespace` and `var.account` are not specified, yields `env-name`."},"name":{"default":null,"description":"stack name"},"namespace":{"default":null,"description":"namespace, which could be your organization name, e.g. amazon"},"tags":{"default":[],"description":"tags, which could be used for additional tags."}}},"version_constraint":"0.0.5"}},"variables":{"az_count":{"description":"Searches region for # of AZs to use and takes a slice based on count. Assume slice is sorted a-z."},"cidr_block":{"default":null,"description":"CIDR range to assign to VPC if creating VPC or to associte as a secondary CIDR. Overridden by var.vpc_id output from data.aws_vpc."},"name":{"description":"Name to give VPC. Note: does not effect subnet names, which get assigned name based on name_prefix."},"subnets":{"description":"Configuration of subnets to build in VPC. 1 Subnet per AZ is created. Subnet types are defined as maps with the available keys: \"private\", \"public\", \"transit_gateway\". Each Subnet type offers its own set of available arguments detailed below.\n\n**Attributes shared across subnet types:**\n- `cidrs`       = (Optional|list(string)) **Cannot set if `netmask` is set.** List of CIDRs to set to subnets. Count of CIDRs defined must match quatity of azs in `az_count`.\n- `netmask`     = (Optional|Int) Netmask of the `var.cidr_block` to calculate for each subnet. **Cannot set if `cidrs` is set.**\n- `name_prefix` = (Optional|String) A string prefix to use for the name of your subnet and associated resources. Subnet type key name is used if omitted (aka private, public, transit_gateway). Example `name_prefix = \"private\"` for `var.subnets.private` is redundant.\n- `tags`        = (Optional|map(string)) Tags to set on the subnet and associated resources.\n\n**private subnet type options:**\n- All shared keys above\n- `route_to_nat`             = (Optional|bool) Determines if routes to NAT Gateways should be created. Default = false. Must also set `var.subnets.public.nat_gateway_configuration`.\n- `route_to_transit_gateway` = (Optional|list(string)) Optionally create routes from private subnets to transit gateway subnets.\n\n**public subnet type options:**\n- All shared keys above\n- `nat_gateway_configuration` = (Optional|string) Determines if NAT Gateways should be created and in how many AZs. Valid values = `\"none\"`, `\"single_az\"`, `\"all_azs\"`. Default = \"none\". Must also set `var.subnets.private.route_to_nat = true`.\n- `route_to_transit_gateway`  = (Optional|list(string)) Optionally create routes from private subnets to transit gateway subnets.\n\n**transit_gateway subnet type options:**\n- All shared keys above\n- `route_to_nat`                                    = (Optional|bool) Determines if routes to NAT Gateways should be created. Default = false. Must also set `var.subnets.public.nat_gateway_configuration`.\n- `transit_gateway_id`                              = (Required|string) Transit gateway to attach VPC to.\n- `transit_gateway_default_route_table_association` = (Optional|bool) Boolean whether the VPC Attachment should be associated with the EC2 Transit Gateway association default route table. This cannot be configured or perform drift detection with Resource Access Manager shared EC2 Transit Gateways.\n- `transit_gateway_default_route_table_propagation` = (Optional|bool) Boolean whether the VPC Attachment should propagate routes with the EC2 Transit Gateway propagation default route table. This cannot be configured or perform drift detection with Resource Access Manager shared EC2 Transit Gateways.\n- `transit_gateway_appliance_mode_support`          = (Optional|string) Whether Appliance Mode is enabled. If enabled, a traffic flow between a source and a destination uses the same Availability Zone for the VPC attachment for the lifetime of that flow. Valid values: `disable` (default) and `enable`.\n- `transit_gateway_dns_support`                     = (Optional|string) DNS Support is used if you need the VPC to resolve public IPv4 DNS host names to private IPv4 addresses when queried from instances in another VPC attached to the transit gateway. Valid values: `enable` (default) and `disable`.\n\nExample:\n```\nsubnets = {\n  public = {\n    netmask                   = 24\n    nat_gateway_configuration = \"single_az\"\n    route_to_transit_gateway  = [\"10.1.0.0/16\"]\n  }\n\n  private = {\n    netmask                  = 24\n    route_to_nat             = true\n    route_to_transit_gateway = [\"10.1.0.0/16\"]\n  }\n\n  transit_gateway = {\n    netmask                                         = 24\n    transit_gateway_id                              = aws_ec2_transit_gateway.example.id\n    route_to_nat                                    = false\n    transit_gateway_default_route_table_association = true\n    transit_gateway_default_route_table_propagation = true\n  }\n}\n```\n"},"tags":{"default":{},"description":"Tags to apply to all resources."},"vpc_enable_dns_hostnames":{"default":true,"description":"Indicates whether the instances launched in the VPC get DNS hostnames. If enabled, instances in the VPC get DNS hostnames; otherwise, they do not. Disabled by default for nondefault VPCs."},"vpc_enable_dns_support":{"default":true,"description":"Indicates whether the DNS resolution is supported for the VPC. If enabled, queries to the Amazon provided DNS server at the 169.254.169.253 IP address, or the reserved IP address at the base of the VPC network range \"plus two\" succeed. If disabled, the Amazon provided DNS service in the VPC that resolves public DNS hostnames to IP addresses is not enabled. Enabled by default."},"vpc_flow_logs":{"default":{"destination_options":null,"iam_role_arn":null,"kms_key_id":null,"log_destination":null,"log_destination_type":"none","retention_in_days":null,"tags":null,"traffic_type":null},"description":"Whether or not to create VPC flow logs and which type. Options: \"cloudwatch\", \"s3\", \"none\". By default creates flow logs to `cloudwatch`. Variable overrides null value types for some keys, defined in defaults.tf."},"vpc_id":{"default":null,"description":"VPC ID to use if not creating VPC."},"vpc_instance_tenancy":{"default":"default","description":"The allowed tenancy of instances launched into the VPC."},"vpc_ipv4_ipam_pool_id":{"default":null,"description":"Set to use IPAM to get CIDR block."},"vpc_ipv4_netmask_length":{"default":null,"description":"Set to use IPAM to get CIDR block using a specified netmask. Must be set with var.vpc_ipv4_ipam_pool_id."},"vpc_secondary_cidr":{"default":false,"description":"If `true` the module will create a `aws_vpc_ipv4_cidr_block_association` and subnets for that secondary cidr. If using IPAM for both primary and secondary CIDRs, you may only call this module serially (aka using `-target`, etc)."}}},"version_constraint":"1.4.1"}},"variables":{"asn_numbers":{"default":{"amazon_side_dxgw":"64531","amazon_side_tgw":"64532","customer_side":64533},"description":"ASNs to configure in the different resources: Direct Connect gateway, Transit Gateway, and Customer gateway (on premises). Remember that all the ASNs cannot overlap between them."},"aws_region":{"default":"eu-central-1","description":"AWS Region to spin up the resources."},"customer_gateway_ip":{"default":"10.66.3.2","description":"IPv4 private address of your Customer gateway (CGW)."},"dxgw_allowed_prefixes":{"default":["10.66.0.0/16"],"description":"Allowed prefixes. This value is indicated when the Direct Connect gateway is associated to the Transit Gateway. The list of prefixes specified here are the CIDR announcements to on premises."},"dxgw_id":{"default":"","description":"ID of the Direct Connect gateway to use for the Private IP VPN connection creation. If no ID is defined, this repository will create one."},"identifier":{"default":"tgw-dx-private-ip-vpn","description":"Project identifier. This value will be added to all the resources names."},"tgw_cidr_blocks":{"default":["10.66.2.0/24"],"description":"Transit Gateway CIDR blocks."}}}},"relevant_attributes":[{"resource":"data.aws_ec2_transit_gateway_vpn_attachment.vpn_tgw_attachment","attribute":["id"]},{"resource":"module.compute[\"spoke-vpc-a\"].aws_instance.ec2_instance","attribute":[]},{"resource":"module.vpc_endpoints[\"spoke-vpc-a\"].aws_vpc_endpoint.endpoint","attribute":[]},{"resource":"module.vpc_endpoints.aws_security_group.endpoints_vpc_sg","attribute":["id"]},{"resource":"module.vpcs[\"spoke-vpc-a\"].data.awscc_ec2_vpc.main[0]","attribute":[]},{"resource":"module.iam_kms.data.aws_iam_policy_document.policy_document","attribute":["json"]},{"resource":"module.vpcs[\"spoke-vpc-b\"].data.aws_availability_zones.current","attribute":["names"]},{"resource":"module.compute[\"spoke-vpc-a\"].aws_security_group.spoke_vpc_sg","attribute":["id"]},{"resource":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_iam_role.main","attribute":["name"]},{"resource":"module.vpcs[\"spoke-vpc-a\"].awscc_ec2_route_table.tgw","attribute":[]},{"resource":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_iam_role.main","attribute":[]},{"resource":"module.vpcs[\"spoke-vpc-a\"].data.aws_availability_zones.current","attribute":["names"]},{"resource":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_iam_role.main","attribute":["name"]},{"resource":"module.vpcs[\"spoke-vpc-b\"].data.aws_vpc_ipam_preview_next_cidr.main[0]","attribute":["cidr"]},{"resource":"module.vpcs[\"spoke-vpc-b\"].awscc_ec2_route_table.public","attribute":[]},{"resource":"aws_ec2_transit_gateway.tgw","attribute":["id"]},{"resource":"module.vpcs.aws_vpc.main[0]","attribute":[]},{"resource":"module.vpcs.awscc_ec2_route_table.tgw","attribute":[]},{"resource":"aws_vpn_connection.private_ip_vpn","attribute":["id"]},{"resource":"module.iam_kms.aws_iam_role.vpc_flowlogs_role","attribute":["arn"]},{"resource":"module.vpc_endpoints.aws_vpc_endpoint.endpoint","attribute":[]},{"resource":"module.vpcs[\"spoke-vpc-b\"].aws_nat_gateway.main","attribute":[]},{"resource":"module.vpcs[\"spoke-vpc-b\"].aws_vpc.main[0]","attribute":[]},{"resource":"data.aws_ec2_transit_gateway_dx_gateway_attachment.tgw_dxgw_attachment","attribute":["id"]},{"resource":"module.vpcs.awscc_ec2_route_table.public","attribute":[]},{"resource":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].aws_flow_log.main","attribute":[]},{"resource":"aws_ec2_transit_gateway_route_table.tgw_rt","attribute":["id"]},{"resource":"module.vpcs[\"spoke-vpc-a\"].aws_eip.nat","attribute":[]},{"resource":"module.vpcs[\"spoke-vpc-b\"].aws_subnet.private","attribute":[]},{"resource":"aws_dx_gateway.dxgw[0]","attribute":["id"]},{"resource":"aws_customer_gateway.cgw","attribute":["id"]},{"resource":"module.vpcs.data.aws_vpc_ipam_preview_next_cidr.main[0]","attribute":["cidr"]},{"resource":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0].data.aws_iam_policy_document.main","attribute":["json"]},{"resource":"module.vpcs[\"spoke-vpc-b\"].awscc_ec2_route_table.private","attribute":[]},{"resource":"module.compute[\"spoke-vpc-b\"].aws_instance.ec2_instance","attribute":[]},{"resource":"module.iam_kms.aws_iam_role.vpc_flowlogs_role","attribute":["id"]},{"resource":"module.vpcs[\"spoke-vpc-a\"].awscc_ec2_route_table.private","attribute":[]},{"resource":"module.iam_kms.aws_iam_instance_profile.ec2_instance_profile","attribute":["id"]},{"resource":"module.compute[\"spoke-vpc-b\"].aws_security_group.spoke_vpc_sg","attribute":["id"]},{"resource":"module.vpcs.data.aws_availability_zones.current","attribute":["names"]},{"resource":"module.vpc_endpoints[\"spoke-vpc-a\"].aws_security_group.endpoints_vpc_sg","attribute":["id"]},{"resource":"module.vpcs.aws_eip.nat","attribute":[]},{"resource":"module.iam_kms.aws_kms_key.log_key","attribute":["arn"]},{"resource":"module.vpcs[\"spoke-vpc-b\"].aws_ec2_transit_gateway_vpc_attachment.tgw[0]","attribute":["id"]},{"resource":"module.vpcs.aws_subnet.tgw","attribute":[]},{"resource":"module.compute.data.aws_ami.amazon_linux","attribute":["id"]},{"resource":"module.vpcs.awscc_ec2_route_table.private","attribute":[]},{"resource":"module.iam_kms.data.aws_iam_policy_document.policy_kms_logs_document","attribute":["json"]},{"resource":"module.compute[\"spoke-vpc-a\"].data.aws_ami.amazon_linux","attribute":["id"]},{"resource":"module.iam_kms.data.aws_iam_policy_document.policy_rolepolicy_document","attribute":["json"]},{"resource":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_iam_policy.main","attribute":["arn"]},{"resource":"module.vpcs[\"spoke-vpc-a\"].aws_subnet.private","attribute":[]},{"resource":"module.vpcs[\"spoke-vpc-b\"].awscc_ec2_route_table.tgw","attribute":[]},{"resource":"module.vpcs[\"spoke-vpc-a\"].aws_nat_gateway.main","attribute":[]},{"resource":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_iam_policy.main","attribute":["arn"]},{"resource":"module.compute[\"spoke-vpc-b\"].data.aws_ami.amazon_linux","attribute":["id"]},{"resource":"module.vpcs[\"spoke-vpc-a\"].aws_ec2_transit_gateway_vpc_attachment.tgw[0]","attribute":["id"]},{"resource":"module.vpcs[\"spoke-vpc-a\"].aws_vpc.main[0]","attribute":[]},{"resource":"module.vpcs[\"spoke-vpc-a\"].data.aws_vpc_ipam_preview_next_cidr.main[0]","attribute":["cidr"]},{"resource":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_cloudwatch_log_group.main","attribute":[]},{"resource":"module.compute.aws_instance.ec2_instance","attribute":[]},{"resource":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].aws_flow_log.main","attribute":[]},{"resource":"module.vpc_endpoints[\"spoke-vpc-b\"].aws_security_group.endpoints_vpc_sg","attribute":["id"]},{"resource":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0].data.aws_iam_policy_document.main","attribute":["json"]},{"resource":"module.vpcs[\"spoke-vpc-a\"].aws_subnet.tgw","attribute":[]},{"resource":"module.vpcs.aws_ec2_transit_gateway_vpc_attachment.tgw[0]","attribute":["id"]},{"resource":"module.vpcs[\"spoke-vpc-a\"].aws_subnet.public","attribute":[]},{"resource":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_iam_role.main","attribute":[]},{"resource":"module.compute.aws_security_group.spoke_vpc_sg","attribute":["id"]},{"resource":"module.vpc_endpoints[\"spoke-vpc-b\"].aws_vpc_endpoint.endpoint","attribute":[]},{"resource":"module.vpcs[\"spoke-vpc-b\"].aws_eip.nat","attribute":[]},{"resource":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0].aws_cloudwatch_log_group.main","attribute":[]},{"resource":"module.vpcs[\"spoke-vpc-b\"].aws_subnet.public","attribute":[]},{"resource":"module.iam_kms.aws_iam_role.role_ec2","attribute":["id"]},{"resource":"module.vpcs.aws_subnet.private","attribute":[]},{"resource":"module.vpcs[\"spoke-vpc-a\"].awscc_ec2_route_table.public","attribute":[]},{"resource":"module.iam_kms.data.aws_iam_policy_document.policy_role_document","attribute":["json"]},{"resource":"module.vpcs.data.awscc_ec2_vpc.main[0]","attribute":[]},{"resource":"module.vpcs.aws_nat_gateway.main","attribute":[]},{"resource":"module.vpcs[\"spoke-vpc-b\"].data.awscc_ec2_vpc.main[0]","attribute":[]},{"resource":"module.vpcs[\"spoke-vpc-b\"].aws_subnet.tgw","attribute":[]},{"resource":"module.vpcs.aws_subnet.public","attribute":[]}],"checks":[{"address":{"kind":"var","module":"module.vpcs.module.flow_logs.module.cloudwatch_log_group","name":"aws_service_principal","to_display":"module.vpcs.module.flow_logs.module.cloudwatch_log_group.var.aws_service_principal"},"status":"pass","instances":[{"address":{"module":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0]","to_display":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0].var.aws_service_principal"},"status":"pass"},{"address":{"module":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0]","to_display":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0].var.aws_service_principal"},"status":"pass"}]},{"address":{"kind":"var","module":"module.vpcs.module.flow_logs.module.cloudwatch_log_group","name":"name","to_display":"module.vpcs.module.flow_logs.module.cloudwatch_log_group.var.name"},"status":"pass","instances":[{"address":{"module":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0]","to_display":"module.vpcs[\"spoke-vpc-a\"].module.flow_logs[0].module.cloudwatch_log_group[0].var.name"},"status":"pass"},{"address":{"module":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0]","to_display":"module.vpcs[\"spoke-vpc-b\"].module.flow_logs[0].module.cloudwatch_log_group[0].var.name"},"status":"pass"}]},{"address":{"kind":"var","module":"module.vpcs.module.tags","name":"id_order","to_display":"module.vpcs.module.tags.var.id_order"},"status":"pass","instances":[{"address":{"module":"module.vpcs[\"spoke-vpc-a\"].module.tags","to_display":"module.vpcs[\"spoke-vpc-a\"].module.tags.var.id_order"},"status":"pass"},{"address":{"module":"module.vpcs[\"spoke-vpc-b\"].module.tags","to_display":"module.vpcs[\"spoke-vpc-b\"].module.tags.var.id_order"},"status":"pass"}]},{"address":{"kind":"var","module":"module.vpcs","name":"subnets","to_display":"module.vpcs.var.subnets"},"status":"unknown","instances":[{"address":{"module":"module.vpcs[\"spoke-vpc-a\"]","to_display":"module.vpcs[\"spoke-vpc-a\"].var.subnets"},"status":"unknown"},{"address":{"module":"module.vpcs[\"spoke-vpc-b\"]","to_display":"module.vpcs[\"spoke-vpc-b\"].var.subnets"},"status":"unknown"}]},{"address":{"kind":"var","module":"module.vpcs","name":"vpc_flow_logs","to_display":"module.vpcs.var.vpc_flow_logs"},"status":"pass","instances":[{"address":{"module":"module.vpcs[\"spoke-vpc-a\"]","to_display":"module.vpcs[\"spoke-vpc-a\"].var.vpc_flow_logs"},"status":"pass"},{"address":{"module":"module.vpcs[\"spoke-vpc-b\"]","to_display":"module.vpcs[\"spoke-vpc-b\"].var.vpc_flow_logs"},"status":"pass"}]},{"address":{"kind":"var","module":"module.vpcs","name":"vpc_instance_tenancy","to_display":"module.vpcs.var.vpc_instance_tenancy"},"status":"pass","instances":[{"address":{"module":"module.vpcs[\"spoke-vpc-a\"]","to_display":"module.vpcs[\"spoke-vpc-a\"].var.vpc_instance_tenancy"},"status":"pass"},{"address":{"module":"module.vpcs[\"spoke-vpc-b\"]","to_display":"module.vpcs[\"spoke-vpc-b\"].var.vpc_instance_tenancy"},"status":"pass"}]}],"timestamp":"2025-03-26T12:15:52Z","applyable":true,"complete":true,"errored":false}
